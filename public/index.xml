<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ernest Omane-Kodie</title>
    <link>/</link>
    <description>Recent content on Ernest Omane-Kodie</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Sat, 23 Mar 2019 21:13:14 -0500</lastBuildDate>
    
        <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Functional Programming helpers from purrr and friends, part 3</title>
      <link>/blog/functional-programming-helpers-from-purrr-and-friends-part-3/</link>
      <pubDate>Sat, 23 Mar 2019 21:13:14 -0500</pubDate>
      
      <guid>/blog/functional-programming-helpers-from-purrr-and-friends-part-3/</guid>
      <description>


&lt;iframe src=&#34;https://giphy.com/embed/8vQSQ3cNXuDGo&#34; width=&#34;300&#34; height=&#34;300&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/cat-moment-remember-8vQSQ3cNXuDGo&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;div id=&#34;background&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Background&lt;/h2&gt;
&lt;p&gt;In the &lt;a href=&#34;https://www.eokodie.com/blog/functional-programming-helpers-from-purrr-and-friends-part-1-rowwise-operations/&#34;&gt;first&lt;/a&gt; and &lt;a href=&#34;https://www.eokodie.com/blog/functional-programming-helpers-from-purrr-and-friends-part-2-composition/&#34;&gt;second&lt;/a&gt; instalments of this blog series, we touched on some functional programming concepts and their implementation in &lt;code&gt;purrr&lt;/code&gt; and related packages. This instalment continues the exploration, showing techniques for writing functions which are capable of creating new functions: &lt;strong&gt;function factories&lt;/strong&gt;, &lt;strong&gt;partial application&lt;/strong&gt; and &lt;strong&gt;quasiquotation&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Let’s begin by loading the packages we need.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(purrr)
library(rlang)
library(fs)
library(magrittr)
library(vroom)
library(readr)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;motivating-example&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Motivating example&lt;/h2&gt;
&lt;p&gt;We will illustrate new concepts by adapting the simple file reading problem from the previous instalment.&lt;/p&gt;
&lt;p&gt;Recapping the example: Imagine we have several flat files in our current working directory.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mtcars %&amp;gt;% 
  split(.$carb) %&amp;gt;% 
  iwalk(~ readr::write_csv(.x, glue::glue(&amp;quot;mtcars_{.y}.csv&amp;quot;)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We want to explore ways of creating functions to read these files into a list of dataframes.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;a-first-attempt&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;A first attempt&lt;/h2&gt;
&lt;p&gt;Our first go at the problem using &lt;code&gt;fs&lt;/code&gt; and &lt;code&gt;purrr&lt;/code&gt; might look like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_many_csv_files &amp;lt;- function(folder_path){
  # extract file names
  file_names &amp;lt;- path(folder_path) %&amp;gt;% 
    dir_ls(type = &amp;quot;file&amp;quot;, glob = &amp;quot;*.csv&amp;quot;) %&amp;gt;%
    map_chr(fs::path_file) 
  
  # load data
  out &amp;lt;- path(folder_path) %&amp;gt;% 
    dir_ls(regexp = &amp;quot;[.]csv$&amp;quot;) %&amp;gt;% 
    map(readr::read_csv) %&amp;gt;% 
    set_names(file_names)
  return(out)
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# read csv files
read_many_csv_files(&amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is all well and good, but imagine further that we don’t want to restrict our function to only use &lt;code&gt;readr::read_csv()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;How do we extend our workflow to accommodate any csv reader?&lt;/p&gt;
&lt;p&gt;In the sections that follow, we will walk through different ways of creating general-purpose versions of &lt;code&gt;read_many_csv_files()&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;function-factories&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Function factories&lt;/h2&gt;
&lt;p&gt;Our second attempt at the motivating problem begins with a function factory (a function for creating other functions):&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_many_csv_files &amp;lt;- function(.f){
  force(.f)
  function(folder_path){
    # extract file names
    file_names &amp;lt;- path(folder_path) %&amp;gt;% 
      dir_ls(type = &amp;quot;file&amp;quot;, glob = &amp;quot;*.csv&amp;quot;) %&amp;gt;% 
      map_chr(fs::path_file) 
    
    # load data
    out &amp;lt;- path(folder_path) %&amp;gt;% 
      dir_ls(regexp = &amp;quot;.csv&amp;quot;) %&amp;gt;% 
      map(.f) %&amp;gt;% 
      set_names(file_names)
    return(out)
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This gives us a version of &lt;code&gt;read_many_csv_files()&lt;/code&gt; which is versatile enough to let us take different file readers (&lt;a href=&#34;https://github.com/jimhester/vroom&#34;&gt;including Jim Hester’s awesome vroom package&lt;/a&gt;) for a spin.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_vroom &amp;lt;- read_many_csv_files(vroom::vroom)
read_with_readr &amp;lt;- read_many_csv_files(readr::read_csv)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_vroom(&amp;quot;.&amp;quot;)
read_with_readr(&amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;whats-happening-under-the-hood&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;What’s happening under the hood?&lt;/h3&gt;
&lt;p&gt;When &lt;code&gt;read_with_vroom()&lt;/code&gt; is created, it captures the current environment which happens to be the enclosing environment of the function factory. Every time &lt;code&gt;read_with_vroom()&lt;/code&gt; is called, it creates a fresh execution environment which is the enclosing environment of the manufactured function.&lt;/p&gt;
&lt;p&gt;This makes lexical scoping possible: for instance since &lt;code&gt;vroom::vroom()&lt;/code&gt; is not in the enclosing enviroment of &lt;code&gt;read_with_vroom()&lt;/code&gt;, R will look for it in the parent environment - &lt;a href=&#34;https://adv-r.hadley.nz/function-factories.html&#34;&gt;See Adv. R for more information&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;partial-application&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Partial application&lt;/h2&gt;
&lt;p&gt;In programming and in mathematics, &lt;strong&gt;function application&lt;/strong&gt; means applying a function to its arguments. &lt;strong&gt;Partial function application&lt;/strong&gt; means pre-filling one or more arguments of a function, to produce a new function with a fewer number of arguments.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;purrr&lt;/code&gt; implements this technique with &lt;code&gt;partial()&lt;/code&gt;. We can create a customisable csv reader with &lt;code&gt;purrr::partial()&lt;/code&gt; in two steps.&lt;/p&gt;
&lt;p&gt;First, we create a function which takes two arguments:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_many_csv_files &amp;lt;- function(.f, file){
  # extract file names
  file_names &amp;lt;- path(file) %&amp;gt;% 
    dir_ls(type = &amp;quot;file&amp;quot;, glob = &amp;quot;*.csv&amp;quot;) %&amp;gt;%
    map(fs::path_file) 
  
  # load data
  out &amp;lt;- path(file) %&amp;gt;% 
    dir_ls(regexp = &amp;quot;[.]csv$&amp;quot;) %&amp;gt;% 
    map(.f) %&amp;gt;% 
    set_names(file_names)
  return(out)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, we pre-fill &lt;code&gt;.f&lt;/code&gt; with our file reader of choice. For example, if we’re feeling super excited about &lt;code&gt;utils::read.csv&lt;/code&gt; we could pass that to &lt;code&gt;read_many_csv_files()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_base &amp;lt;- partial(read_many_csv_files, .f = read.csv)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_base(&amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;quasiquotation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Quasiquotation&lt;/h2&gt;
&lt;p&gt;Quasiquotation involves using two techniques: quoting (i.e. capturing an expression to be evaluated later) and unquoting (i.e. evaluating parts of an otherwise quoted expression).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rlang&lt;/code&gt; provides &lt;code&gt;new_function()&lt;/code&gt; which constructs a new function given its three components: list of arguments, body code and parent environment (the caller environment by default).&lt;/p&gt;
&lt;p&gt;When combined with quasiquotation, &lt;code&gt;new_function()&lt;/code&gt; can be used as an alternative to function factories. For example, we could write a customisable csv reader function:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_many_csv_files &amp;lt;- function(.f){
  rlang::new_function(
    args = exprs(folder_path =),
    body = expr({
      file_names &amp;lt;- path(folder_path) %&amp;gt;% 
        ddir_ls(type = &amp;quot;file&amp;quot;, glob = &amp;quot;*.csv&amp;quot;) %&amp;gt;% 
        map_chr(fs::path_file) 
      
      out &amp;lt;- path(folder_path) %&amp;gt;% 
        dir_ls(regexp = &amp;quot;[.]csv$&amp;quot;) %&amp;gt;% 
        map(!!.f) %&amp;gt;% 
        set_names(file_names)
    }) ,
    env = caller_env()
  )
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And use it to generate a function to read csv files with &lt;code&gt;vroom::vroom()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_vroom &amp;lt;- read_many_csv_files(vroom::vroom)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_with_vroom(&amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;how-does-it-work&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;How does it work?&lt;/h3&gt;
&lt;p&gt;As with function factories, when we execute &lt;code&gt;read_with_vroom()&lt;/code&gt;, the current environment is the execution environment of the current function (i.e. the one currently being evaluated). The caller environment is the execution environment of the function that called the current function (i.e. &lt;code&gt;read_many_csv_files()&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Note that in our example, the &lt;code&gt;body&lt;/code&gt; argument captures (quotes) the multiline expression which represents code inside the manufactured function. At the moment of quoting these expressions, &lt;code&gt;.f&lt;/code&gt; is known (i.e. can be looked up from the caller environment). We use &lt;code&gt;rlang::!!&lt;/code&gt; to evaluate (unquote) &lt;code&gt;.f&lt;/code&gt; before we capture the expressions in the &lt;code&gt;body&lt;/code&gt; of &lt;code&gt;rlang::new_function()&lt;/code&gt; - &lt;a href=&#34;https://adv-r.hadley.nz/quasiquotation.html#unquoting&#34;&gt;See Adv. R for more information&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;wrapping-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Wrapping up&lt;/h2&gt;
&lt;p&gt;This concludes our brief look at three techniques for code generation: function factories, partial application and quasiquotation.&lt;/p&gt;
&lt;p&gt;If after reading this you crave more &lt;code&gt;purrr&lt;/code&gt;, FP and tidyeval goodness, head over to these resources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://colinfay.me/purrr-web-mining/&#34;&gt;Colin Fay’s awesome 6 part series&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.rstudio.com/resources/videos/happy-r-users-purrr-tutorial/&#34;&gt;Charlotte Wickham’s Happy R Users Purrr - Tutorial&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://milesmcbain.xyz/the-roots-of-quotation/&#34;&gt;Miles McBain’s The Roots of Quotation&lt;/a&gt; which inspired a host of other great posts about tidy evaluation&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Functional Programming helpers from purrr and friends, part 2 | Composition</title>
      <link>/blog/functional-programming-helpers-from-purrr-and-friends-part-2-composition/</link>
      <pubDate>Wed, 02 Jan 2019 21:13:14 -0500</pubDate>
      
      <guid>/blog/functional-programming-helpers-from-purrr-and-friends-part-2-composition/</guid>
      <description>


&lt;iframe src=&#34;https://giphy.com/embed/l2iNlSsrLaszStTSio&#34; width=&#34;360&#34; height=&#34;480&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/l2iNlSsrLaszStTSio&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;div id=&#34;background&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Background&lt;/h2&gt;
&lt;p&gt;In the &lt;a href=&#34;https://www.eokodie.com/blog/functional-programming-helpers-from-purrr-and-friends-part-1-rowwise-operations/&#34;&gt;first instalment&lt;/a&gt; of this blog series, I explored how some functional programming (FP) concepts are implemented in R using &lt;code&gt;purrr&lt;/code&gt; and associated packages. This post extends the exploration to cover two closely related concepts: &lt;em&gt;composition&lt;/em&gt; and &lt;em&gt;pointfree style&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Note that the main focus of the blog series is FP concepts that feel natural to R and are in line with the design philosophy of &lt;code&gt;purrr&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The goal of purrr is not try and turn R into Haskell in R: it does not implement currying, or destructuring binds, or pattern matching. The goal is to give you similar expressiveness to a classical FP language, while allowing you to write code that looks and feels like R” - &lt;a href=&#34;https://purrr.tidyverse.org/articles/other-langs.html&#34;&gt;purrr vignette&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(magrittr)
library(fs)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;composition&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Composition&lt;/h2&gt;
&lt;p&gt;Composition is a technique for combining small functions to form a new function.&lt;/p&gt;
&lt;p&gt;Suppose &lt;code&gt;g&lt;/code&gt; and &lt;code&gt;f&lt;/code&gt; are &lt;a href=&#34;https://en.wikipedia.org/wiki/Unary_function&#34;&gt;unary functions&lt;/a&gt; which perform transformations on dataframes. If we are interested in the sequential application of these functions, we can create a new function by applying &lt;code&gt;g&lt;/code&gt; and &lt;code&gt;f&lt;/code&gt; from right to left (as is conventional in mathematics) with nested calls.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;g(f(data))))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This syntax works in R but the expression becomes difficult to read as the number of functions grows.&lt;/p&gt;
&lt;p&gt;We will look at two ways of eliminating nested function calls using tidyverse implementations of &lt;em&gt;composition.&lt;/em&gt;&lt;/p&gt;
&lt;div id=&#34;motivating-example&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Motivating example&lt;/h3&gt;
&lt;p&gt;Imagine we have several small csv files on disk. We want to write a simple workflow to read data from the files and store them in a list of tibbles.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;composition-with-pipes&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Composition with pipes&lt;/h3&gt;
&lt;p&gt;The forward pipe operator (&lt;code&gt;%&amp;gt;%&lt;/code&gt;) from Stefan Bache’s &lt;code&gt;magrittr&lt;/code&gt; package makes it possible to implement function composition in R. We achieve this by chaining small functions with &lt;code&gt;%&amp;gt;%&lt;/code&gt; and replacing the initial object with the dot placeholder.&lt;/p&gt;
&lt;p&gt;This means we can solve the problem in our motivating example by composing &lt;code&gt;load_files()&lt;/code&gt; with pipes:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;load_files &amp;lt;- . %&amp;gt;% 
  path() %&amp;gt;% 
  dir_ls(regexp = &amp;quot;[.]csv$&amp;quot;) %&amp;gt;% 
  map(read_csv)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Stringing functions together with pipes and replacing the initial object with the dot placeholder creates a function in its own right. The composed function is a &lt;strong&gt;functional sequence&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We can inspect the contents of the &lt;em&gt;functional sequence&lt;/em&gt; with &lt;code&gt;magrittr::functions()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;magrittr::functions(load_files)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [[1]]
## function (.) 
## path(.)
## 
## [[2]]
## function (.) 
## dir_ls(., regexp = &amp;quot;[.]csv$&amp;quot;)
## 
## [[3]]
## function (.) 
## map(., read_csv)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;One nice feature of functional sequences is that they work with standard subsetting tools. This gives us the flexibility to apply an entire pipeline (or a subset of the pipeline) to an object.&lt;/p&gt;
&lt;p&gt;For example, we can use a &lt;code&gt;single square bracket&lt;/code&gt; subset to generate a new functional sequence:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;magrittr::functions(load_files[-3])&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [[1]]
## function (.) 
## path(.)
## 
## [[2]]
## function (.) 
## dir_ls(., regexp = &amp;quot;[.]csv$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can also use a &lt;code&gt;double square bracket&lt;/code&gt; subset to generate a single function:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;load_files[[1]]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## function (.) 
## path(.)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which makes the following possible:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path_name &amp;lt;- &amp;quot;./data&amp;quot;

# construct path
load_files[[1]](path_name) 
#&amp;gt; ./data

# list csv files in the directory
load_files[-3](path_name)
#&amp;gt; ./data/file1.csv ./data/file2.csv ./data/file3.csv 

# read csv files and store in list
data_list &amp;lt;- load_files(path_name)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;purrr-composed-functions&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;purrr composed functions&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;purrr&lt;/code&gt; provides a function for composition: &lt;code&gt;compose&lt;/code&gt;. &lt;code&gt;compose&lt;/code&gt; takes any number of functions and applies them in turn from right to left (by default). The order in which functions are applied can be reversed by setting the &lt;code&gt;.dir&lt;/code&gt; argument to “&lt;em&gt;forward&lt;/em&gt;”.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;purrr::compose&lt;/code&gt;, the workflow becomes:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;load_files &amp;lt;- compose(
  ~ path(.),
  ~ dir_ls(path = ., regexp = &amp;quot;[.]csv$&amp;quot;),
  ~ map(., read_csv),
  .dir = c(&amp;quot;forward&amp;quot;)
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that &lt;code&gt;purrr::compose&lt;/code&gt; works with anonymous functions supplied as formulas.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;load_files&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;composed&amp;gt;
## 1. &amp;lt;lambda&amp;gt;
## function (..., .x = ..1, .y = ..2, . = ..1) 
## path(.)
## attr(,&amp;quot;class&amp;quot;)
## [1] &amp;quot;rlang_lambda_function&amp;quot;
## 
## 2. &amp;lt;lambda&amp;gt;
## function (..., .x = ..1, .y = ..2, . = ..1) 
## dir_ls(path = ., regexp = &amp;quot;[.]csv$&amp;quot;)
## attr(,&amp;quot;class&amp;quot;)
## [1] &amp;quot;rlang_lambda_function&amp;quot;
## 
## 3. &amp;lt;lambda&amp;gt;
## function (..., .x = ..1, .y = ..2, . = ..1) 
## map(., read_csv)
## attr(,&amp;quot;class&amp;quot;)
## [1] &amp;quot;rlang_lambda_function&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;pointfree&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Pointfree&lt;/h2&gt;
&lt;div id=&#34;a-bit-more-background&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;A bit more background&lt;/h3&gt;
&lt;p&gt;In functional programming, &lt;strong&gt;points&lt;/strong&gt; refer to function argument. &lt;strong&gt;Pointfree&lt;/strong&gt; (also called tacit programming) means getting rid of arguments using composition.&lt;/p&gt;
&lt;p&gt;Suppose we want to apply a series of transformations to a dataframe. The imperative way to do this in R will look like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df1 &amp;lt;- log(mtcars)
df2 &amp;lt;- tan(df1)
df3 &amp;lt;- sqrt(df2)
result &amp;lt;- abs(df3)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This approach has a number of drawbacks.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We have to pass parameters everywhere&lt;/li&gt;
&lt;li&gt;we need to think about naming intermediate variables, but naming is notorious for being hard&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;“There are only two hard things in Computer Science: cache invalidation and naming things” - Phil Karlton&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Our example is simple but in a real system, this would mean passing a ship-load of parameters and naming tons of variables.&lt;/p&gt;
&lt;p&gt;In the following sections, we will look at two ways of simplifying the workflow with pointfree style.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sweet-dreams-are-made-of-pipes&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Sweet dreams are made of pipes&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;%&amp;gt;%&lt;/code&gt; is syntactic sugar for invoking multiple function calls on an object without needing to create variables to store intermediate results.&lt;/p&gt;
&lt;p&gt;Using pipes, the series of data transformations becomes:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;result &amp;lt;- mtcars %&amp;gt;%
  log %&amp;gt;% 
  tan %&amp;gt;% 
  sqrt %&amp;gt;% 
  abs&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What we are doing here is piping the dataset through the first function, then piping the result into the next function and so on.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;magrittrfreduce&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;magrittr::freduce&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;magrittr&lt;/code&gt; has a function for this type of problem: &lt;code&gt;freduce&lt;/code&gt;. &lt;code&gt;freduce&lt;/code&gt; takes a list of functions, and applies the functions sequentially to the object.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;result &amp;lt;- freduce(mtcars, list(log, tan, sqrt, abs))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;wrapping-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Wrapping up&lt;/h2&gt;
&lt;p&gt;We have covered the tidyverse implementation of two related functional programming techniques:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Getting rid of nested function calls with composition&lt;/li&gt;
&lt;li&gt;Getting rid of arguments with pointfree&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Remember that although the pipe makes code concise and easy to read, it is important not to take it too far. Where a pipeline has a lot of sequence of operations, consider creating intermediate steps with meaningful names. Also consider using the pipe only when the workflow transforms one main object (For more on this, see &lt;a href=&#34;https://r4ds.had.co.nz/pipes.html&#34;&gt;the pipes chapter&lt;/a&gt; of R for Data Science).&lt;/p&gt;
&lt;div id=&#34;references&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://magrittr.tidyverse.org/&#34;&gt;Magrittr: A Forward-Pipe Operator for R&lt;/a&gt; - Stefan Milton Bache and Hadley Wickham&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://r4ds.had.co.nz&#34;&gt;R for Data Science&lt;/a&gt; - Garrett Grolemund and Hadley Wickham&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://purrr.tidyverse.org/articles/other-langs.html&#34;&gt;purrr vignette&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Functional Programming helpers from purrr and friends, part 1 | Rowwise operations</title>
      <link>/blog/functional-programming-helpers-from-purrr-and-friends-part-1-rowwise-operations/</link>
      <pubDate>Tue, 18 Dec 2018 21:13:14 -0500</pubDate>
      
      <guid>/blog/functional-programming-helpers-from-purrr-and-friends-part-1-rowwise-operations/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;iframe src=&#34;https://giphy.com/embed/3oriO0OEd9QIDdllqo&#34; width=&#34;480&#34; height=&#34;477&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/jerseydemic-3oriO0OEd9QIDdllqo&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;div id=&#34;motivation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Motivation&lt;/h2&gt;
&lt;p&gt;This series of blog posts is inspired by David Robinson’s tweet:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you’ve given the same in-person advice 3 times, write a blog post.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In each instalment in the series, I will walk through simple scenarios to illustrate how functional programming tools from &lt;a href=&#34;https://purrr.tidyverse.org/&#34;&gt;&lt;code&gt;purrr&lt;/code&gt;&lt;/a&gt; and related packages can bring quality of life improvements to tidyverse workflows.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(magrittr)
library(kableExtra)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pretty_print &amp;lt;- function(df){
  result &amp;lt;- df %&amp;gt;% 
    kable() %&amp;gt;% 
    kable_styling(font_size = 14) %&amp;gt;% 
    row_spec(0, bold = T, font_size = 14)
  return(result)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;rowwise-operations-on-all-columns-in-a-dataframe&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Rowwise operations on all columns in a dataframe&lt;/h2&gt;
&lt;div id=&#34;background&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Background&lt;/h3&gt;
&lt;p&gt;We will use a small subset of the &lt;code&gt;planes&lt;/code&gt; dataset to illustrate this example.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- nycflights13::planes %&amp;gt;% 
  select(tailnum, year, engine) %&amp;gt;% 
  head(4)

df %&amp;gt;% pretty_print&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
tailnum
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;font-size: 14px;&#34;&gt;
year
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
engine
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2004
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1998
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Suppose we want to create a new column by concatenating elements in each row of the dataframe to form a string.&lt;/p&gt;
&lt;p&gt;Base R provides a &lt;a href=&#34;https://adv-r.hadley.nz/functionals.html&#34;&gt;&lt;strong&gt;functional&lt;/strong&gt;&lt;/a&gt; (a function which takes one or more functions as arguments) for performing this type of operation: &lt;code&gt;apply&lt;/code&gt;. &lt;code&gt;apply&lt;/code&gt; belongs to a special group of functionals: the &lt;a href=&#34;https://en.wikipedia.org/wiki/Map_(higher-order_function)&#34;&gt;&lt;code&gt;map family&lt;/code&gt;&lt;/a&gt; (functions that take a function and a list as inputs, and return a new list with the function applied to each element from the list).&lt;/p&gt;
&lt;p&gt;How does it work?&lt;/p&gt;
&lt;p&gt;Under the hood, &lt;code&gt;apply&lt;/code&gt; inspects the object to which the function will be applied and coerces it to a matrix if the object is two-dimentional (e.g. a dataframe). Otherwise, the object is coerced to an array. After this step, the function is applied to either the rows (along &lt;code&gt;MARGIN&lt;/code&gt; 1) or columns (along &lt;code&gt;MARGIN&lt;/code&gt; 2) of the matrix or array.&lt;/p&gt;
&lt;p&gt;This means that rowwise string concatenation in base R will look like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df_base &amp;lt;- df
df_base$id = apply(df, 1, paste, collapse = &amp;quot; &amp;quot;)
pretty_print(df_base)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
tailnum
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;font-size: 14px;&#34;&gt;
year
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
engine
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
id
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2004
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156 2004 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1998
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW 1998 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US 1999 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW 1999 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;how-can-we-implement-this-operation-with-tidyverse-tools&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;How can we implement this operation with tidyverse tools?&lt;/h3&gt;
&lt;!-- ### pmap + mutate --&gt;
&lt;p&gt;We can solve this with &lt;code&gt;purrr::pmap&lt;/code&gt; in a &lt;code&gt;dplyr::mutate&lt;/code&gt; call. &lt;code&gt;pmap&lt;/code&gt; is a member of &lt;code&gt;purrr&lt;/code&gt;’s implementation the &lt;code&gt;map&lt;/code&gt; family of functions which allows vectorized iteration over more than one argument.&lt;/p&gt;
&lt;p&gt;If you are new to &lt;code&gt;purrr&lt;/code&gt;, the &lt;a href=&#34;https://r4ds.had.co.nz/iteration.html&#34;&gt;iteration chapter of R for Data Science&lt;/a&gt; is worth reading.&lt;/p&gt;
&lt;p&gt;We will solve the problem in our example in two steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Create an anonymous function which performs string concatenation on any number of arguments passed to it&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Pass the anonymous function as an argument to &lt;code&gt;pmap_chr&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;pmap_chr&lt;/code&gt; is a stricter variant of &lt;code&gt;pmap&lt;/code&gt; which always returns a character vector. This ensures that there are no surprises in our output as a result of R’s weak type system.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
  mutate(id = pmap_chr(., ~paste(..., collapse = &amp;quot; &amp;quot;))) %&amp;gt;% 
  pretty_print() &lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
tailnum
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;font-size: 14px;&#34;&gt;
year
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
engine
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
id
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2004
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156 2004 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1998
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW 1998 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US 1999 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW 1999 Turbo-fan
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Notice that instead of passing an anonymous function to &lt;code&gt;pmap&lt;/code&gt; we passed a formula. &lt;code&gt;purrr&lt;/code&gt; supports this syntax to make it possible for users to create very compact anonymous functions on the fly.&lt;/p&gt;
&lt;p&gt;This works because, under the hood, &lt;code&gt;pmap&lt;/code&gt; (like all &lt;code&gt;purrr&lt;/code&gt; functionals) translates formulas into mapper functions using &lt;code&gt;purrr::as_mapper&lt;/code&gt;. This means that the formula in our example will look like this behind the scenes:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as_mapper(~paste(..., collapse = &amp;quot; &amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;lambda&amp;gt;
## function (..., .x = ..1, .y = ..2, . = ..1) 
## paste(..., collapse = &amp;quot; &amp;quot;)
## attr(,&amp;quot;class&amp;quot;)
## [1] &amp;quot;rlang_lambda_function&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;rowwise-operations-on-specific-columns-in-a-dataframe&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Rowwise operations on specific columns in a dataframe&lt;/h2&gt;
&lt;p&gt;As a concrete example, imagine we want to create a new column by concatenating year and tailnum.&lt;/p&gt;
&lt;p&gt;How do we achieve this with tidyverse tools?&lt;/p&gt;
&lt;div id=&#34;mutate-pmap&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;mutate + pmap&lt;/h3&gt;
&lt;p&gt;There are a few ways of doing this with a similar approach to the &lt;code&gt;mutate&lt;/code&gt; + &lt;code&gt;pmap&lt;/code&gt; workflow from the previous example.&lt;/p&gt;
&lt;p&gt;We can solve the problem with a neat trick by taking &lt;a href=&#34;https://community.rstudio.com/t/dplyr-alternatives-to-rowwise/8071/29&#34;&gt;a leaf out of Hadley Wickham’s book.&lt;/a&gt; This approach uses &lt;code&gt;list()&lt;/code&gt;, instead of the dot placeholder, to match arguments (to the anonymous function) by name.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
  mutate(id = pmap_chr(list(year, tailnum), ~paste(..., collapse = &amp;quot; &amp;quot;))) %&amp;gt;% 
  pretty_print() &lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
tailnum
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;font-size: 14px;&#34;&gt;
year
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
engine
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
id
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2004
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2004 N10156
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1998
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1998 N102UW
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1999 N103US
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1999 N104UW
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;rap&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;rap&lt;/h3&gt;
&lt;p&gt;While writing up this post, I stumbled upon &lt;a href=&#34;https://github.com/romainfrancois/rap&#34;&gt;Romain Francois’ rap package&lt;/a&gt; which provides a nice alternative to the &lt;code&gt;pmap&lt;/code&gt; + &lt;code&gt;mutate&lt;/code&gt; approach to row-oriented operations.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rap&lt;/code&gt;, like &lt;code&gt;map&lt;/code&gt;, works with anonymous functions supplied as formulas. The main difference is that with &lt;code&gt;rap&lt;/code&gt; the anonymous functions can directly use column names.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(rap)

df %&amp;gt;% 
  rap(id = character() ~ paste(year, tailnum, collapse = &amp;quot; &amp;quot;)) %&amp;gt;% 
  pretty_print&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
tailnum
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;font-size: 14px;&#34;&gt;
year
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
engine
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;font-size: 14px;&#34;&gt;
id
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N10156
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2004
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2004 N10156
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N102UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1998
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1998 N102UW
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N103US
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1999 N103US
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
N104UW
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1999
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Turbo-fan
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1999 N104UW
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Note that the left hand side (lhs) of the formula specifies the type of results returned. If the lhs is empty, &lt;code&gt;rap&lt;/code&gt; adds a list column to the dataframe.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Drinking from the Firehose: using R to keep up with current ML Research - part 1</title>
      <link>/blog/drinking-from-the-firehose-using-r-to-keep-up-with-current-ml-research-part-1/</link>
      <pubDate>Tue, 12 Jun 2018 21:13:14 -0500</pubDate>
      
      <guid>/blog/drinking-from-the-firehose-using-r-to-keep-up-with-current-ml-research-part-1/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;iframe src=&#34;https://giphy.com/embed/GSgZ1Flo2U9UI&#34; width=&#34;480&#34; height=&#34;360&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/cat-GSgZ1Flo2U9UI&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;In this post, I will explore how we can use resources available in the R package ecosystem to keep up with state-of-the-art machine learning research.&lt;/p&gt;
&lt;div id=&#34;motivation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Motivation&lt;/h2&gt;
&lt;p&gt;Recently, I have been reading books about creativity. The recurring concept in the books is that the key place to start when mastering a skill is by reproducing other people’s proven ideas and figuring out their inner workings - a form of apprenticeship.&lt;/p&gt;
&lt;p&gt;The 19th Century French writer, &lt;a href=&#34;https://en.wikipedia.org/wiki/%C3%89mile_Zola&#34;&gt;Emile Zola&lt;/a&gt;, captured the essence of this idea in his description of art as &lt;strong&gt;“a corner of creation seen through a temperament”&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Will Gompertz neatly paraphrases this in &lt;a href=&#34;https://www.amazon.co.uk/dp/B00T3UIYFG/ref=dp-kindle-redirect?_encoding=UTF8&amp;amp;btkr=1&#34;&gt;Think Like an Artist&lt;/a&gt; as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Creativity is the presentation of pre-existing elements and ideas filtered through the perceptions and feelings of an individual.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The idea permeates all creative endeavours. Would-be singer-songwriters, scientists, painters, and so on, start off by attempting to replicate some established piece of work. Andrew Ng captures this same idea in &lt;a href=&#34;http://qr.ae/TUTrnq&#34;&gt;this response to a question on Quora&lt;/a&gt; I stumbled upon while writing up this post:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“To go even further, read research papers (follow ML leaders on twitter to see what papers they’re excited about). Even better, try to replicate the results in the research papers. Trying to replicate others’ results is one of the most effective but under-appreciated ways to get good at AI”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;the-problem&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The problem&lt;/h2&gt;
&lt;p&gt;The challenge with applying this concept to machine learning practice is that, in many respects, the field is going through exciting times. We are witnessing the relentless creation of new algorithms, drastic improvements in existing algorithms, an explosion of data, significant strides in computer hardware technology, and unprecedented collaboration among researchers from different fields.&lt;/p&gt;
&lt;p&gt;Although the internet has made it much easier to source materials and information, the sheer volume of research literature emerging from all the moving parts of machine learning can be overwhelming.&lt;/p&gt;
&lt;p&gt;How do you discover new research literature? How do you find the most relevant research for your work? In the following sections, I will attempt to answer these questions. The aim is to use a few examples to shed a little light on how to stay plugged in to the research community without leaving the R software environment&lt;a href=&#34;#fn1&#34; class=&#34;footnoteRef&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;academic-databases-and-search-engines&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Academic databases and search engines&lt;/h2&gt;
&lt;p&gt;There is a comprehensive list of academic databases and search engines on &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_academic_databases_and_search_engines&#34;&gt;this Wikipedia page&lt;/a&gt;. I will look at one example of the most popular databases in this category.&lt;/p&gt;
&lt;div id=&#34;arxiv&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;arXiv&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://arxiv.org/&#34;&gt;arXiv&lt;/a&gt; is a repository of scientific papers, created in the spirit of the open access movement, where mathematicians and scientists usually upload their papers for worldwide access and sometimes for reviews before they are published in peer-reviewed journals.&lt;/p&gt;
&lt;p&gt;I will use &lt;a href=&#34;https://cran.r-project.org/web/packages/aRxiv/index.html&#34;&gt;&lt;code&gt;aRxiv&lt;/code&gt;&lt;/a&gt;, an R interface to the &lt;a href=&#34;https://arxiv.org/help/api/index&#34;&gt;arXiv API&lt;/a&gt;, and a few &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;&lt;code&gt;tidyverse&lt;/code&gt;&lt;/a&gt; tools to explore arXiv papers.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(aRxiv)
library(tidyverse)
library(kableExtra)

pretty_print &amp;lt;- function(df){
  result = df %&amp;gt;% 
    kable() %&amp;gt;% 
    kable_styling(font_size = 14) %&amp;gt;% 
    row_spec(0, bold = T)
  return(result)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To start off, we need to construct a search query. To do this, we need terms to use as query arguments. The following options are available:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;query_terms %&amp;gt;% pretty_print&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
term
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
description
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ti
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Title
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
au
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Author
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
abs
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Abstract
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
co
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Comment
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
jr
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Journal Reference
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
cat
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Subject Category
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
rn
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Report Number
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
all
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
All of the above
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
submittedDate
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Date/time of initial submission, as YYYYMMDDHHMM
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
lastUpdatedDate
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Date/time of last update, as YYYYMMDDHHMM
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Machine learning and related research papers are typically submitted under the following categories:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ai_ml_categories &amp;lt;- c(&amp;quot;Artificial&amp;quot;, &amp;quot;Intelligence&amp;quot;, &amp;quot;Learning&amp;quot;, 
                   &amp;quot;Robotics&amp;quot;, &amp;quot;Vision&amp;quot;) %&amp;gt;% 
  str_flatten(&amp;quot;|&amp;quot;)

arxiv_cats %&amp;gt;% 
  dplyr::filter(str_detect(description, ai_ml_categories)) %&amp;gt;% 
  pretty_print&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
abbreviation
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
description
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
stat.ML
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Statistics - Machine Learning
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
cs.AI
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Computer Science - Artificial Intelligence
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
cs.CV
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Computer Science - Computer Vision and Pattern Recognition
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
cs.LG
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Computer Science - Learning
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
cs.RO
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Computer Science - Robotics
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;We can search for papers under specific categories. For example, we can inspect papers submitted under robotics in the first three months of 2018 using:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c(&amp;quot;cat:cs.RO&amp;quot;, 
  &amp;quot;submittedDate:[201801010000 TO 201802302400]&amp;quot;) %&amp;gt;% 
  str_flatten(&amp;quot; AND &amp;quot;) %&amp;gt;% 
  arxiv_search(limit = 12, sort_by = &amp;quot;updated&amp;quot;, ascending = FALSE) %&amp;gt;% 
  select(submitted, id, title) %&amp;gt;% 
  head(5) %&amp;gt;% 
  pretty_print()&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
submitted
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
id
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
title
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-02-16 18:57:57
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1802.06070v5
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Diversity is All You Need: Learning Skills without a Reward Function
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-02-12 17:47:13
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1802.04205v3
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Efficient Hierarchical Robot Motion Planning Under Uncertainty and Hybrid Dynamics
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-02-25 04:47:31
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1802.08953v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Robust Target-relative Localization with Ultra-Wideband Ranging and Communication
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-01-06 14:50:07
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1801.02025v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Robot Localisation and 3D Position Estimation Using a Free-Moving Camera and Cascaded Convolutional Neural Networks
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-01-01 23:41:50
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1801.00527v3
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Freeform Assembly Planning
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;We can search for papers by topic. For example, the following are a few of the most recent papers on adversarial AI submitted from the beginning of the year to 7th June 2018.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;c(&amp;quot;ti:Adversarial&amp;quot;, 
  &amp;quot;submittedDate:[201801010000 TO 201806072400]&amp;quot;) %&amp;gt;% 
  str_flatten(&amp;quot; AND &amp;quot;) %&amp;gt;% 
  arxiv_search(limit = 12, sort_by = &amp;quot;updated&amp;quot;, ascending = FALSE) %&amp;gt;% 
  select(submitted, id, title) %&amp;gt;% 
  head(5) %&amp;gt;% 
  pretty_print()  &lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
submitted
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
id
&lt;/th&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
title
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-02-15 17:13:18
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1802.05666v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Adversarial Risk and the Dangers of Evaluating Against Weak Attacks
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-05-21 10:58:10
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1805.07984v3
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Adversarial Attacks on Neural Networks for Graph Data
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-06-05 17:04:37
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1806.02299v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DPatch: Attacking Object Detectors with Adversarial Patches
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-06-07 23:27:16
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1806.02924v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
On Adversarial Risk and Training
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
2018-05-30 00:05:53
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1805.11752v2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Multi-turn Dialogue Response Generation in an Adversarial Learning Framework
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;We can build complex queries based on specific needs by chaining multiple queries together with &lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;OR&lt;/code&gt;, and &lt;code&gt;ANDNOT&lt;/code&gt;. We can also search Titles, Authors, Abstract and so on.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;github&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;GitHub&lt;/h2&gt;
&lt;p&gt;Most new research in the machine learning community comprise open-source projects hosted on GitHub. This is great news in the sense that you can easily obtain a copy of the source code of a project of interest and tinker with it to your heart’s content.&lt;/p&gt;
&lt;p&gt;In this section, I will explore research projects hosted on GitHub. I will use the &lt;code&gt;httr&lt;/code&gt; package to access the &lt;a href=&#34;https://developer.github.com/v3/search/&#34;&gt;GitHub search API&lt;/a&gt;, and then use a few &lt;code&gt;tidyverse&lt;/code&gt; packages to extract the necessary data points.&lt;/p&gt;
&lt;p&gt;Suppose we want to find the most starred repositories about generative adversarial networks. We can start by creating a URL with a search query and pass that to &lt;code&gt;httr&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(httr)
library(magrittr)

url &amp;lt;- glue::glue(&amp;quot;https://api.github.com/search/repositories?&amp;quot;,
                 &amp;quot;q=generative+adversarial+networkin:name,description&amp;amp;&amp;quot;,
                 &amp;quot;sort=stars&amp;amp;&amp;quot;, 
                 &amp;quot;order=desc&amp;quot;)

gh_repos &amp;lt;- GET(url) %&amp;gt;% 
  content(encoding = &amp;quot;UTF-8&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s inspect all the metadata available on each repository:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gh_repos %&amp;gt;%
  use_series(&amp;quot;items&amp;quot;) %&amp;gt;% 
  extract2(1) %&amp;gt;% 
  names()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;id&amp;quot;                &amp;quot;node_id&amp;quot;           &amp;quot;name&amp;quot;             
##  [4] &amp;quot;full_name&amp;quot;         &amp;quot;owner&amp;quot;             &amp;quot;private&amp;quot;          
##  [7] &amp;quot;html_url&amp;quot;          &amp;quot;description&amp;quot;       &amp;quot;fork&amp;quot;             
## [10] &amp;quot;url&amp;quot;               &amp;quot;forks_url&amp;quot;         &amp;quot;keys_url&amp;quot;         
## [13] &amp;quot;collaborators_url&amp;quot; &amp;quot;teams_url&amp;quot;         &amp;quot;hooks_url&amp;quot;        
## [16] &amp;quot;issue_events_url&amp;quot;  &amp;quot;events_url&amp;quot;        &amp;quot;assignees_url&amp;quot;    
## [19] &amp;quot;branches_url&amp;quot;      &amp;quot;tags_url&amp;quot;          &amp;quot;blobs_url&amp;quot;        
## [22] &amp;quot;git_tags_url&amp;quot;      &amp;quot;git_refs_url&amp;quot;      &amp;quot;trees_url&amp;quot;        
## [25] &amp;quot;statuses_url&amp;quot;      &amp;quot;languages_url&amp;quot;     &amp;quot;stargazers_url&amp;quot;   
## [28] &amp;quot;contributors_url&amp;quot;  &amp;quot;subscribers_url&amp;quot;   &amp;quot;subscription_url&amp;quot; 
## [31] &amp;quot;commits_url&amp;quot;       &amp;quot;git_commits_url&amp;quot;   &amp;quot;comments_url&amp;quot;     
## [34] &amp;quot;issue_comment_url&amp;quot; &amp;quot;contents_url&amp;quot;      &amp;quot;compare_url&amp;quot;      
## [37] &amp;quot;merges_url&amp;quot;        &amp;quot;archive_url&amp;quot;       &amp;quot;downloads_url&amp;quot;    
## [40] &amp;quot;issues_url&amp;quot;        &amp;quot;pulls_url&amp;quot;         &amp;quot;milestones_url&amp;quot;   
## [43] &amp;quot;notifications_url&amp;quot; &amp;quot;labels_url&amp;quot;        &amp;quot;releases_url&amp;quot;     
## [46] &amp;quot;deployments_url&amp;quot;   &amp;quot;created_at&amp;quot;        &amp;quot;updated_at&amp;quot;       
## [49] &amp;quot;pushed_at&amp;quot;         &amp;quot;git_url&amp;quot;           &amp;quot;ssh_url&amp;quot;          
## [52] &amp;quot;clone_url&amp;quot;         &amp;quot;svn_url&amp;quot;           &amp;quot;homepage&amp;quot;         
## [55] &amp;quot;size&amp;quot;              &amp;quot;stargazers_count&amp;quot;  &amp;quot;watchers_count&amp;quot;   
## [58] &amp;quot;language&amp;quot;          &amp;quot;has_issues&amp;quot;        &amp;quot;has_projects&amp;quot;     
## [61] &amp;quot;has_downloads&amp;quot;     &amp;quot;has_wiki&amp;quot;          &amp;quot;has_pages&amp;quot;        
## [64] &amp;quot;forks_count&amp;quot;       &amp;quot;mirror_url&amp;quot;        &amp;quot;archived&amp;quot;         
## [67] &amp;quot;open_issues_count&amp;quot; &amp;quot;license&amp;quot;           &amp;quot;forks&amp;quot;            
## [70] &amp;quot;open_issues&amp;quot;       &amp;quot;watchers&amp;quot;          &amp;quot;default_branch&amp;quot;   
## [73] &amp;quot;score&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What we are looking for in our example is the GitHub URL and the number of stars for each repository (stargazers_count).&lt;/p&gt;
&lt;p&gt;Let’s look at the top 5 most starred GitHub repositories in this category.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;extract_info &amp;lt;- function(index){
  repository &amp;lt;- gh_repos %&amp;gt;% 
    use_series(&amp;quot;items&amp;quot;) %&amp;gt;% 
    extract2(index) %&amp;gt;% 
    extract2(&amp;quot;html_url&amp;quot;)
  
  stars_count &amp;lt;- gh_repos %&amp;gt;% 
    use_series(&amp;quot;items&amp;quot;) %&amp;gt;% 
    extract2(index) %&amp;gt;% 
    extract2(&amp;quot;stargazers_count&amp;quot;)
  
  return(data.frame(repository = repository, 
                    stars_count = stars_count))
}

1:5 %&amp;gt;% map_dfr(extract_info) %&amp;gt;% 
  pretty_print()&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table&#34; style=&#34;font-size: 14px; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;font-weight: bold;&#34;&gt;
repository
&lt;/th&gt;
&lt;th style=&#34;text-align:right;font-weight: bold;&#34;&gt;
stars_count
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;a href=&#34;https://github.com/carpedm20/DCGAN-tensorflow&#34; class=&#34;uri&#34;&gt;https://github.com/carpedm20/DCGAN-tensorflow&lt;/a&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4271
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;a href=&#34;https://github.com/junyanz/iGAN&#34; class=&#34;uri&#34;&gt;https://github.com/junyanz/iGAN&lt;/a&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2785
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;a href=&#34;https://github.com/Newmu/dcgan_code&#34; class=&#34;uri&#34;&gt;https://github.com/Newmu/dcgan_code&lt;/a&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2762
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;a href=&#34;https://github.com/eriklindernoren/Keras-GAN&#34; class=&#34;uri&#34;&gt;https://github.com/eriklindernoren/Keras-GAN&lt;/a&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1895
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;a href=&#34;https://github.com/nightrome/really-awesome-gan&#34; class=&#34;uri&#34;&gt;https://github.com/nightrome/really-awesome-gan&lt;/a&gt;
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1715
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;journals-rss-feeds&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Journals &amp;amp; RSS feeds&lt;/h2&gt;
&lt;p&gt;We can explore papers being published in scientific journals by extracting their RSS feeds. I will use &lt;a href=&#34;https://github.com/RobertMyles/tidyrss&#34;&gt;&lt;code&gt;tidyRSS&lt;/code&gt;&lt;/a&gt;, an R package for extracting tidy dataframes from RSS, Atom and JSON feeds. For feeds that do not play nice with &lt;a href=&#34;https://github.com/RobertMyles/tidyrss&#34;&gt;&lt;code&gt;tidyRSS&lt;/code&gt;&lt;/a&gt;, I will use the &lt;a href=&#34;https://github.com/DataWookie/feedeR&#34;&gt;&lt;code&gt;feedeR&lt;/code&gt;&lt;/a&gt; package.&lt;/p&gt;
&lt;p&gt;Here are two examples:&lt;/p&gt;
&lt;p&gt;We can search new research papers published in &lt;a href=&#34;https://www.sciencemag.org/&#34;&gt;Science magazine&lt;/a&gt; to see if anything has been published on a specific topic of interest.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyRSS)
science_magazine &amp;lt;- tidyfeed(&amp;quot;http://science.sciencemag.org/rss/twis.xml&amp;quot;)
names(science_magazine)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;feed_title&amp;quot;       &amp;quot;feed_link&amp;quot;        &amp;quot;feed_description&amp;quot;
## [4] &amp;quot;item_title&amp;quot;       &amp;quot;item_link&amp;quot;        &amp;quot;item_description&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;item_title&lt;/code&gt; contains a brief description of each paper. We can search this for specific keywords.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;science_magazine %&amp;gt;% 
  filter(str_detect(url, &amp;quot;some_regex&amp;quot;)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can search publications in the &lt;a href=&#34;http://jmlr.org/&#34;&gt;Journal of Machine Learning Research&lt;/a&gt; using:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(feedeR)
jmlr &amp;lt;- feed.extract(&amp;quot;http://jmlr.org/jmlr.xml&amp;quot;) %&amp;gt;% 
  use_series(&amp;quot;items&amp;quot;)
names(jmlr)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;title&amp;quot; &amp;quot;date&amp;quot;  &amp;quot;link&amp;quot;  &amp;quot;hash&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again we can search &lt;code&gt;title&lt;/code&gt; for specific keywords.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;wrapping-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Wrapping up&lt;/h2&gt;
&lt;p&gt;Using logic similar to what we’ve stepped through above, we could set up an automated process to regularly scrape these portals for all the relevant information and upload the results in a webpage or set up an email notification whenever something which might be of interest gets published.&lt;/p&gt;
&lt;p&gt;In a future post, I will explore social media and other resources.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;You can achieve this same end through a combination of various mobile apps, email subscriptions, keeping an eye on machine learning tags on social media and so on, but where is the fun in that?&lt;a href=&#34;#fnref1&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Colours &amp; Impact: Resources for Data Visualization with a splash of R</title>
      <link>/blog/colours-impact-resources-for-data-visualization-with-a-splash-of-r/</link>
      <pubDate>Mon, 11 Jun 2018 21:13:14 -0500</pubDate>
      
      <guid>/blog/colours-impact-resources-for-data-visualization-with-a-splash-of-r/</guid>
      <description>


&lt;iframe src=&#34;https://giphy.com/embed/PH8gHFw2YJPaM&#34; width=&#34;383&#34; height=&#34;480&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/paint-knife-palette-PH8gHFw2YJPaM&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;A curated list of awesome data visualization resources with a splash of R. Inspired by &lt;a href=&#34;https://awesome-r.com/&#34;&gt;Awesome R&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Arranged in no particular order.&lt;/p&gt;
&lt;div id=&#34;colour-theory-chart-design&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Colour theory &amp;amp; chart design&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://earthobservatory.nasa.gov/blogs/elegantfigures/2013/08/05/subtleties-of-color-part-1-of-6/&#34;&gt;Subtleties of Color&lt;/a&gt;- Robert Simmon (2013)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.visualisingdata.com/2015/01/make-grey-best-friend/&#34;&gt;Make grey your best friend&lt;/a&gt; - Andy Kirk (2015)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://towardsdatascience.com/viz-palette-for-data-visualization-color-8e678d996077&#34;&gt;Viz Palette for Data Visualization Color&lt;/a&gt; - Elijah Meeks (2018)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://venngage.com/blog/color-blind-friendly-palette/&#34;&gt;How to Optimize Charts For Color Blind Readers&lt;/a&gt; - Tom Jager (2017)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://venngage.com/blog/infographic-design-the-dos-and-donts-of-color-selection/&#34;&gt;The Do’s And Don’ts of Infographic Color Selection&lt;/a&gt; - Ryan McCready (2016)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://venngage.com/blog/chart-design/&#34;&gt;10 Do’s and Don’ts of Infographic Chart Design&lt;/a&gt; - Midori Nediger (2018)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://venngage.com/blog/data-visualization-tips/&#34;&gt;5 Data Visualization Tips to Guide Your Design Process&lt;/a&gt; - Jan Willem Tulp (2017)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.datawrapper.de/colors/&#34;&gt;What to consider when choosing colors for data visualization&lt;/a&gt; - Lisa Charlotte Rost (2018)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://theblog.adobe.com/the-power-of-the-palette-why-color-is-key-in-data-visualization-and-how-to-use-it/&#34;&gt;The Power of The Palette: Why Color is Key in Data Visualization and How to Use It&lt;/a&gt; - Alan Wilson (2017)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;web-tools&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Web tools&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://colororacle.org/usage.html&#34;&gt;colororacle&lt;/a&gt; - Colour-blindness simulator&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.canva.com/color-palette/&#34;&gt;Canva Color Palette Generator&lt;/a&gt; - creates a palette based on the five main colours of any uploaded image&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.materialpalette.com/&#34;&gt;Material palette&lt;/a&gt; - converts any two colours into a full colour palette&lt;br /&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://vrl.cs.brown.edu/color&#34;&gt;Colorgorical&lt;/a&gt; - tool by Connor Gramazio for creating categorical information visualization colour palettes&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://colorbrewer2.org/#type=sequential&amp;amp;scheme=BuGn&amp;amp;n=3&#34;&gt;Colorbrewer&lt;/a&gt; - tool for choosing choropleth map color schemes, based on Cynthia Brewer’s research&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://color.adobe.com/create/color-wheel/&#34;&gt;Adobe Color CC&lt;/a&gt; - Adobe’s tool for creating categorical palettes&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tools.medialab.sciences-po.fr/iwanthue/&#34;&gt;i want hue&lt;/a&gt; - tool by Mathieu Jacomy for optimising colours and palettes&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.colorfavs.com&#34;&gt;colorfavs&lt;/a&gt; - tool to create and discover colours and Palettes&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;podcasts&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Podcasts&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://datastori.es/&#34;&gt;Data Stories&lt;/a&gt; - data visualization with Enrico Bertini and Moritz Stefaner&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://policyviz.com/podcast/&#34;&gt;policyviz&lt;/a&gt; - helping listeners better communicate their research, analysis, and ideas&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://leapica.com/podcast/&#34;&gt;The Present Beyond Measure&lt;/a&gt; - bi-weekly podcast at the intersection of analytics, data visualization, and digital analytics&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.storytellingwithdata.com/podcast/&#34;&gt;storytelling with data&lt;/a&gt; - covers topics related to data storytelling, better presentations, and all things data visualization&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;websites&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Websites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.presentationzen.com&#34;&gt;Presentaion Zen&lt;/a&gt; - Garr Reynolds’s popular website on how to design and deliver powerful presentations&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://informationisbeautiful.net&#34;&gt;information is beautiful&lt;/a&gt; - David McCandless’s site dedicated to helping people make clearer, more informed decisions about the world&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.visualcomplexity.com/vc/&#34;&gt;visual complexity&lt;/a&gt; - unified resource space for anyone interested in the visualization of complex networks&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.awwwards.com/websites/data-visualization/&#34;&gt;awwwards&lt;/a&gt; - a meeting point, where digital design professionals from across the globe find inspiration, impart knowledge and experience, connect, and share constructive, respectful critiques&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.gapminder.org&#34;&gt;Gapminder&lt;/a&gt; - Swedish independent foundation which fights misconceptions about global development and promotes a fact-based worldview&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://chartporn.org/&#34;&gt;Chart porn&lt;/a&gt; - curates the cool data analysis work being done in the world&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;r-packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R packages&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/thomasp85/scico&#34;&gt;scico&lt;/a&gt; - Thomas Lin Pedersen’s R interface to Fabio Crameri’s colour palettes based on the Scientific Colour-Maps&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/RColorBrewer/index.html&#34;&gt;RColorBrewer&lt;/a&gt; - Erich Neuwirth’s R implementation of Cynthia Brewer’s &lt;a href=&#34;http://colorbrewer2.org&#34;&gt;colobrewer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/AndreaCirilloAC/paletter&#34;&gt;paletter&lt;/a&gt; - Andrea Cirillo’s package for creating an optimised palette from a custom image&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/sjmgarnier/viridis&#34;&gt;viridis&lt;/a&gt; - Simon Garnier’s R Implementation of the Matplolib ‘viridis’ color map&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/calligross/ggthemeassist&#34;&gt;ggThemeAssist&lt;/a&gt; - an RStudio add-in which provides a GUI for editing ggplot2 themes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can search Github for more R packages using:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
# key word search with &amp;quot;palette&amp;quot;, &amp;quot;theme&amp;quot; etc.
key_word = &amp;quot;palette&amp;quot;
gh_pkgs &amp;lt;- glue::glue(&amp;quot;http://rpkg-api.gepuro.net/rpkg?q={key_word}&amp;quot;) %&amp;gt;% 
  jsonlite::fromJSON() &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can search CRAN using:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cran_pkgs &amp;lt;- tools::CRAN_package_db()
cran_pkgs &amp;lt;- cran_pkgs[, !duplicated(colnames(cran_pkgs))]

cran_pkgs %&amp;gt;% 
  filter(str_detect(Description, &amp;quot;palette&amp;quot;) == TRUE) %&amp;gt;% 
  select(Package, Date, Author, Title, Description)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;books&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Books&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Visual-Display-Quantitative-Information/dp/0961392142&#34;&gt;The Visual Display of Quantitative Information&lt;/a&gt; - Edward R.Tufte&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Storytelling-Data-Visualization-Business-Professionals/dp/1119002257&#34;&gt;Storytelling with Data: A Data Visualization Guide for Business Professionals&lt;/a&gt; - Cole Nussbaumer Knaflic&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Good-Charts-Smarter-Persuasive-Visualizations-ebook/dp/B01BO6QM9Q/ref=tmm_kin_swatch_0?_encoding=UTF8&amp;amp;qid=&amp;amp;sr=&#34;&gt;Good Charts The HBR Guide to Making Smarter, More Persuasive Data Visualizations&lt;/a&gt; - Scott Berinato&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Truthful-Art-Data-Charts-Communication-ebook/dp/B01BLN09U0/ref=pd_sim_351_5?_encoding=UTF8&amp;amp;psc=1&amp;amp;refRID=3N1YB3PRH0ANZDT42K56&#34;&gt;The Truthful Art&lt;/a&gt; - Albert Cairo&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Visualize-This-FlowingData-Visualization-Statistics-ebook/dp/B005CCT19M/ref=tmm_kin_swatch_0?_encoding=UTF8&amp;amp;qid=&amp;amp;sr=&#34;&gt;Visualize This: The FlowingData Guide to Design, Visualization, and Statistics&lt;/a&gt; - Nathan Yau&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Information-Graphics-Sandra-Rendgen/dp/3836528797&#34;&gt;Information Graphics&lt;/a&gt; - Sandra Rendgen, Julius Wiedemann&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Visual-Thinking-Kaufmann-Interactive-Technologies-ebook/dp/B006NVY448/ref=tmm_kin_swatch_0?_encoding=UTF8&amp;amp;qid=&amp;amp;sr=&#34;&gt;Visual Thinking for Design&lt;/a&gt; - Colin Ware&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/Semiology-Graphics-Diagrams-Networks-Maps/dp/1589482611&#34;&gt;Semiology of Graphics: Diagrams, Networks, Maps&lt;/a&gt; - Jacques Berti&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.uk/dp/B00E8W7NGA/ref=dp-kindle-redirect?_encoding=UTF8&amp;amp;btkr=1&#34;&gt;Cartographies of Time: A History of the Timeline&lt;/a&gt; - Daniel Rosenberg and Anthony Grafton&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://r4ds.had.co.nz/graphics-for-communication.html&#34;&gt;R for Data Science&lt;/a&gt; - the graphics for communication chapter of Garrett Grolemund and Hadley Wickham’s book&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;awesome-list-of-curated-awesomeness&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Awesome list of curated awesomeness&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mathisonian/awesome-visualization-research&#34;&gt;awesome-visualization-research&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/fasouto/awesome-dataviz&#34;&gt;awesome-dataviz&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/zingchart/awesome-charting&#34;&gt;awesome-charting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Siddharth11/Colorful&#34;&gt;Colorful&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/EmilHvitfeldt/r-color-palettes&#34;&gt;r-color-palettes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;meta&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Meta&lt;/h2&gt;
&lt;p&gt;I have created a &lt;a href=&#34;https://github.com/eokodie/colours-and-impact&#34;&gt;companion GitHub repository&lt;/a&gt; for this blog post. Feel free to contribute by creating a &lt;a href=&#34;https://github.com/eokodie/colours-and-impact/pulls&#34;&gt;pull request&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Need for Speed: Benchmarks on Dataframes</title>
      <link>/blog/need-for-speed-benchmarks-on-dataframes/</link>
      <pubDate>Mon, 30 Apr 2018 21:13:14 -0500</pubDate>
      
      <guid>/blog/need-for-speed-benchmarks-on-dataframes/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/proj4js/proj4.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/rmarkdown-libs/highcharts/css/motion.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/highstock.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/highcharts-3d.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/highcharts-more.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/annotations.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/broken-axis.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/data.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/drilldown.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/exporting.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/funnel.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/heatmap.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/map.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/no-data-to-display.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/offline-exporting.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/solid-gauge.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/modules/treemap.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/annotations.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/draggable-legend.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/draggable-points.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/export-csv.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/grouped-categories.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/motion.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/pattern-fill-v2.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/plugins/tooltip-delay.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/custom/reset.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/custom/symbols-extra.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/highcharts/custom/text-symbols.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/rmarkdown-libs/fontawesome/font-awesome.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;/rmarkdown-libs/htmlwdgtgrid/htmlwdgtgrid.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/rmarkdown-libs/highchart-binding/highchart.js&#34;&gt;&lt;/script&gt;


&lt;iframe src=&#34;https://giphy.com/embed/MZkHHFNtF9B8k&#34; width=&#34;480&#34; height=&#34;270&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/MZkHHFNtF9B8k&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;In this post, I will explore the execution speed of various implementations of dataframe aggregation and combining operations in R.&lt;/p&gt;
&lt;p&gt;I will record timings using &lt;a href=&#34;https://cran.r-project.org/web/packages/microbenchmark/&#34;&gt;microbenchmark&lt;/a&gt;, a package for measuring the performance of very small pieces of R code.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The most productive way to make code fast is… to make it work correctly, determine whether it’s actually worth speeding it up, and–in those cases where it is–to use a profiler to identify bottlenecks” – &lt;a href=&#34;https://arxiv.org/abs/1210.0530&#34;&gt;Best Practices for Scientific Computing&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For larger, fully-functioning chunks of R code, where a clear need for optimisation has been established, you might want to consider rewriting bottlenecks using lower level languages like C and Fortran, but bear in mind that any speed gains will come at the expense of readability and development time.&lt;/p&gt;
&lt;p&gt;As a general rule of thumb, whenever possible, first tune the performance of R code using R solutions and resort to lower level languages only when you are certain that the performance gain will outstrip development time.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“The conventional wisdom shared by many of today’s software engineers calls for ignoring efficiency in the small; but I believe this is simply an overreaction… In established engineering disciplines a 12% improvement, easily obtained, is never considered marginal.” – Donald Knuth&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;disclaimer&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Disclaimer&lt;/h2&gt;
&lt;p&gt;The benchmarks are based on simple dataframes and do not take into account the impact of datasets of varying complexity on performance. The results may not be representative of your use case, since any difference in your system hardware and the structure of your datasets may affect actual test results. Always benchmark against your specific data and use case.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;p&gt;The tests are performed on a single Windows 10 laptop (i7 6820HK &lt;span class=&#34;citation&#34;&gt;@2.7&lt;/span&gt; GHz) with 64GB RAM and a decent SSD (M.2 Samsung SM951).&lt;/p&gt;
&lt;p&gt;For each test, there are 10 warm-up iterations followed by the actual benchmark. Execution times are based on running each expression 1,000 times and randomly shuffling the order of expressions evaluated.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Data&lt;/h2&gt;
&lt;p&gt;First up, we need example datasets to run the tests on. Let’s create a few dataframes and store them in a list for convenience.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(microbenchmark)
library(data.table)
library(highcharter)
library(magrittr) 
library(glue)
num_of_iterations = 1000 &lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;create_data &amp;lt;- function(i){
  df = data.frame(key = c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), value = i*(1:3))
  return(df)
} 
data_list &amp;lt;- 1:4 %&amp;gt;% map(create_data) &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;helpers&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Helpers&lt;/h2&gt;
&lt;p&gt;Next, we will simplify our workflow with a few helper functions, each serving a specific purpose.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;compare_dfs &amp;lt;- function(df_name){
  df1 &amp;lt;- get(ls(pattern = pattern, envir = .GlobalEnv)[1])
  setequal(df1, get(df_name))
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;create_boxplot &amp;lt;- function(data, title){
  p &amp;lt;- hcboxplot(x = data$time, var = data$expr, 
                 outliers = FALSE, color = &amp;#39;tomato&amp;#39;, 
                 fillColor = &amp;#39;white&amp;#39;, lineWidth = 1.5) %&amp;gt;%
    hc_chart(type = &amp;quot;column&amp;quot;)  %&amp;gt;% 
    hc_title(text = glue(&amp;quot;&amp;lt;b&amp;gt;{title}&amp;lt;b&amp;gt;&amp;quot;))  %&amp;gt;%
    hc_yAxis(title = list(text = &amp;quot;&amp;lt;b&amp;gt; Time (ns)&amp;lt;b&amp;gt;&amp;quot;)) %&amp;gt;% 
    hc_add_theme(hc_theme_ffx())
  return(p)
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;give_names &amp;lt;- function(name){
  df &amp;lt;- get(name)
  df %&amp;lt;&amp;gt;% setnames(c(&amp;quot;key&amp;quot;, paste0(&amp;quot;value_&amp;quot;, 1:(ncol(df)-1))))
}&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;compare_dfs&lt;/code&gt;: a function which takes a list of dataframes and checks that all dataframes in the list are identical&lt;/li&gt;
&lt;li&gt;&lt;code&gt;create_boxplot&lt;/code&gt;: a function which creates a boxplot of microbenchmark timings by passing a &lt;code&gt;microbenchmark&lt;/code&gt; object to &lt;code&gt;highcharter&lt;/code&gt;; an R wrapper for the &lt;a href=&#34;https://www.highcharts.com&#34;&gt;Highcharts javascript library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;give_names&lt;/code&gt;: a function to rename the columns of a dataframe&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;stacking-dataframes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Stacking dataframes&lt;/h2&gt;
&lt;p&gt;R provides several ways of combining dataframes by rows to create a larger dataframe. Note that this type of operation only works if the dataframes have the same variable names.&lt;/p&gt;
&lt;p&gt;I will compare four approaches:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;multiple calls to &lt;code&gt;base::rbind&lt;/code&gt; using a for-loop&lt;/li&gt;
&lt;li&gt;a call to &lt;code&gt;base::rbind&lt;/code&gt; using &lt;code&gt;do.call&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;a call to &lt;code&gt;data.table::rbindlist&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;a call to &lt;code&gt;dplyr::bind_rows&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let’s start by stacking up the dataframes using these approaches:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for_loop_rbind &amp;lt;- function(data_list){
  df = data_list[[1]]
  for (i in 2:length(data_list)){
    df = rbind(df, data_list[[i]])
  }
  return(df)
}

rbind_for_loop_stk = for_loop_rbind(data_list)
rbind_do_call_stk = do.call(rbind, data_list)
data_table_rbindlist_stk = rbindlist(data_list)
dplyr_bind_rows_stk = bind_rows(data_list)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Do the different methods produce the same dataframe?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pattern = &amp;#39;_stk&amp;#39;
ls(pattern = pattern) %&amp;gt;%
  map_lgl(compare_dfs)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE TRUE TRUE TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As expected, the results are identical. We can now test the execution speed of each method but before we proceed, let’s do a quick sense check of what to expect. &lt;code&gt;dplyr::bind_rows&lt;/code&gt; and &lt;code&gt;data.table::rbindlist&lt;/code&gt; both accept a list of dataframes and are optimized for iterating over many dataframes. So you would expect these to be faster than any other implementation which combines two dataframes at a time (i.e. the base R versions).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;microbenchmark(
  dplyr_bind_rows = bind_rows(data_list),
  data_table_rbindlist = rbindlist(data_list),
  do_call_rbind = do.call(rbind, data_list),  
  for_loop_rbind = for_loop_rbind(data_list),
  times = num_of_iterations,
  unit = &amp;#39;ns&amp;#39;,
  control = list(warmup = 10)
  ) %&amp;gt;% 
  create_boxplot(title = &amp;quot;Stacking&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:100%;height:500px;&#34; class=&#34;highchart html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;hc_opts&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt;Stacking&lt;b&gt;&#34;},&#34;yAxis&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt; Time (ns)&lt;b&gt;&#34;}},&#34;credits&#34;:{&#34;enabled&#34;:false},&#34;exporting&#34;:{&#34;enabled&#34;:false},&#34;plotOptions&#34;:{&#34;series&#34;:{&#34;turboThreshold&#34;:0,&#34;marker&#34;:{&#34;symbol&#34;:&#34;circle&#34;},&#34;showInLegend&#34;:false},&#34;treemap&#34;:{&#34;layoutAlgorithm&#34;:&#34;squarified&#34;},&#34;bubble&#34;:{&#34;minSize&#34;:5,&#34;maxSize&#34;:25}},&#34;annotationsOptions&#34;:{&#34;enabledButtons&#34;:false},&#34;tooltip&#34;:{&#34;delayForDisplay&#34;:10},&#34;chart&#34;:{&#34;type&#34;:&#34;column&#34;},&#34;xAxis&#34;:{&#34;type&#34;:&#34;category&#34;,&#34;categories&#34;:&#34;&#34;},&#34;series&#34;:[{&#34;name&#34;:null,&#34;data&#34;:[{&#34;name&#34;:&#34;dplyr_bind_rows&#34;,&#34;low&#34;:13971,&#34;q1&#34;:21522.5,&#34;median&#34;:25299,&#34;q3&#34;:27564,&#34;high&#34;:36626},{&#34;name&#34;:&#34;data_table_rbindlist&#34;,&#34;low&#34;:70230,&#34;q1&#34;:90998,&#34;median&#34;:97794,&#34;q3&#34;:105724,&#34;high&#34;:127246},{&#34;name&#34;:&#34;do_call_rbind&#34;,&#34;low&#34;:234101,&#34;q1&#34;:262420,&#34;median&#34;:275635,&#34;q3&#34;:316791,&#34;high&#34;:397972},{&#34;name&#34;:&#34;for_loop_rbind&#34;,&#34;low&#34;:413075,&#34;q1&#34;:459517,&#34;median&#34;:490101,&#34;q3&#34;:548815.5,&#34;high&#34;:682291}],&#34;type&#34;:&#34;boxplot&#34;,&#34;id&#34;:null,&#34;color&#34;:&#34;tomato&#34;,&#34;fillColor&#34;:&#34;white&#34;,&#34;lineWidth&#34;:1.5}]},&#34;theme&#34;:{&#34;colors&#34;:[&#34;#00AACC&#34;,&#34;#FF4E00&#34;,&#34;#B90000&#34;,&#34;#5F9B0A&#34;,&#34;#CD6723&#34;],&#34;chart&#34;:{&#34;backgroundColor&#34;:{&#34;linearGradient&#34;:[0,0,0,150],&#34;stops&#34;:[[0,&#34;#CAE1F4&#34;],[1,&#34;#EEEEEE&#34;]]},&#34;style&#34;:{&#34;fontFamily&#34;:&#34;Open Sans&#34;}},&#34;title&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;subtitle&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;legend&#34;:{&#34;align&#34;:&#34;right&#34;,&#34;verticalAlign&#34;:&#34;bottom&#34;},&#34;xAxis&#34;:{&#34;gridLineWidth&#34;:1,&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1},&#34;yAxis&#34;:{&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1}},&#34;conf_opts&#34;:{&#34;global&#34;:{&#34;Date&#34;:null,&#34;VMLRadialGradientURL&#34;:&#34;http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png&#34;,&#34;canvasToolsURL&#34;:&#34;http =//code.highcharts.com/list(version)/modules/canvas-tools.js&#34;,&#34;getTimezoneOffset&#34;:null,&#34;timezoneOffset&#34;:0,&#34;useUTC&#34;:true},&#34;lang&#34;:{&#34;contextButtonTitle&#34;:&#34;Chart context menu&#34;,&#34;decimalPoint&#34;:&#34;.&#34;,&#34;downloadJPEG&#34;:&#34;Download JPEG image&#34;,&#34;downloadPDF&#34;:&#34;Download PDF document&#34;,&#34;downloadPNG&#34;:&#34;Download PNG image&#34;,&#34;downloadSVG&#34;:&#34;Download SVG vector image&#34;,&#34;drillUpText&#34;:&#34;Back to {series.name}&#34;,&#34;invalidDate&#34;:null,&#34;loading&#34;:&#34;Loading...&#34;,&#34;months&#34;:[&#34;January&#34;,&#34;February&#34;,&#34;March&#34;,&#34;April&#34;,&#34;May&#34;,&#34;June&#34;,&#34;July&#34;,&#34;August&#34;,&#34;September&#34;,&#34;October&#34;,&#34;November&#34;,&#34;December&#34;],&#34;noData&#34;:&#34;No data to display&#34;,&#34;numericSymbols&#34;:[&#34;k&#34;,&#34;M&#34;,&#34;G&#34;,&#34;T&#34;,&#34;P&#34;,&#34;E&#34;],&#34;printChart&#34;:&#34;Print chart&#34;,&#34;resetZoom&#34;:&#34;Reset zoom&#34;,&#34;resetZoomTitle&#34;:&#34;Reset zoom level 1:1&#34;,&#34;shortMonths&#34;:[&#34;Jan&#34;,&#34;Feb&#34;,&#34;Mar&#34;,&#34;Apr&#34;,&#34;May&#34;,&#34;Jun&#34;,&#34;Jul&#34;,&#34;Aug&#34;,&#34;Sep&#34;,&#34;Oct&#34;,&#34;Nov&#34;,&#34;Dec&#34;],&#34;thousandsSep&#34;:&#34; &#34;,&#34;weekdays&#34;:[&#34;Sunday&#34;,&#34;Monday&#34;,&#34;Tuesday&#34;,&#34;Wednesday&#34;,&#34;Thursday&#34;,&#34;Friday&#34;,&#34;Saturday&#34;]}},&#34;type&#34;:&#34;chart&#34;,&#34;fonts&#34;:&#34;Open+Sans&#34;,&#34;debug&#34;:false},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;As expected, &lt;code&gt;dplyr::bind_rows&lt;/code&gt; and &lt;code&gt;data.table::rbindlist&lt;/code&gt; are faster than the implementation in &lt;code&gt;base&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Also note that &lt;code&gt;dplyr::bind_rows&lt;/code&gt; outperforms &lt;code&gt;data.table::rbindlist&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;multiple-joins&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Multiple joins&lt;/h2&gt;
&lt;p&gt;I will use the same workflow as before to compare the following approaches:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;single call to &lt;code&gt;base::merge&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;single call to &lt;code&gt;data.table:::merge.data.table&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;purrr::reduce&lt;/code&gt; to iteratively perform repeated &lt;code&gt;dplyr::left_join&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for_loop_leftjoin_func &amp;lt;- function(data_list){
  df = data_list[[1]]
  for (i in 2:length(data_list)){
    df = left_join(df, data_list[[i]], by = &amp;quot;key&amp;quot;)
  }
  return(df)
}

base_merge_jn &amp;lt;- reduce(data_list, base::merge, by = c(&amp;quot;key&amp;quot;))
dplyr_left_join_jn &amp;lt;- reduce(data_list, left_join, by = &amp;quot;key&amp;quot;) 
datatable_merge_jn &amp;lt;- reduce(data_list, data.table:::merge.data.table, by = c(&amp;quot;key&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Are the dataframes identical?
# rename df columns
pattern = &amp;#39;_jn&amp;#39;
rename_dfs &amp;lt;- ls(pattern = pattern) %&amp;gt;%
  map(give_names)

# compare dataframes
ls(pattern = pattern) %&amp;gt;%
  map_lgl(compare_dfs) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE TRUE TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# run and plot benchmarks
microbenchmark(
  base_merge = reduce(data_list, base::merge, by = c(&amp;quot;key&amp;quot;)),  
  dplyr_left_join = reduce(data_list, left_join, by = &amp;quot;key&amp;quot;), 
  datatable_merge = reduce(data_list, data.table:::merge.data.table, 
                           by = c(&amp;quot;key&amp;quot;)),
  times = num_of_iterations,
  unit = &amp;quot;ns&amp;quot;,
  control = list(warmup = 10)
  ) %&amp;gt;% 
  create_boxplot(title = &amp;quot;Joins&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-2&#34; style=&#34;width:100%;height:500px;&#34; class=&#34;highchart html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-2&#34;&gt;{&#34;x&#34;:{&#34;hc_opts&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt;Joins&lt;b&gt;&#34;},&#34;yAxis&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt; Time (ns)&lt;b&gt;&#34;}},&#34;credits&#34;:{&#34;enabled&#34;:false},&#34;exporting&#34;:{&#34;enabled&#34;:false},&#34;plotOptions&#34;:{&#34;series&#34;:{&#34;turboThreshold&#34;:0,&#34;marker&#34;:{&#34;symbol&#34;:&#34;circle&#34;},&#34;showInLegend&#34;:false},&#34;treemap&#34;:{&#34;layoutAlgorithm&#34;:&#34;squarified&#34;},&#34;bubble&#34;:{&#34;minSize&#34;:5,&#34;maxSize&#34;:25}},&#34;annotationsOptions&#34;:{&#34;enabledButtons&#34;:false},&#34;tooltip&#34;:{&#34;delayForDisplay&#34;:10},&#34;chart&#34;:{&#34;type&#34;:&#34;column&#34;},&#34;xAxis&#34;:{&#34;type&#34;:&#34;category&#34;,&#34;categories&#34;:&#34;&#34;},&#34;series&#34;:[{&#34;name&#34;:null,&#34;data&#34;:[{&#34;name&#34;:&#34;base_merge&#34;,&#34;low&#34;:1225252,&#34;q1&#34;:1406491.5,&#34;median&#34;:1480875.5,&#34;q3&#34;:1604344,&#34;high&#34;:1900368},{&#34;name&#34;:&#34;dplyr_left_join&#34;,&#34;low&#34;:1679861,&#34;q1&#34;:1909996.5,&#34;median&#34;:2005147.5,&#34;q3&#34;:2158822.5,&#34;high&#34;:2529797},{&#34;name&#34;:&#34;datatable_merge&#34;,&#34;low&#34;:2704616,&#34;q1&#34;:3050481.5,&#34;median&#34;:3196039,&#34;q3&#34;:3420322.5,&#34;high&#34;:3972157}],&#34;type&#34;:&#34;boxplot&#34;,&#34;id&#34;:null,&#34;color&#34;:&#34;tomato&#34;,&#34;fillColor&#34;:&#34;white&#34;,&#34;lineWidth&#34;:1.5}]},&#34;theme&#34;:{&#34;colors&#34;:[&#34;#00AACC&#34;,&#34;#FF4E00&#34;,&#34;#B90000&#34;,&#34;#5F9B0A&#34;,&#34;#CD6723&#34;],&#34;chart&#34;:{&#34;backgroundColor&#34;:{&#34;linearGradient&#34;:[0,0,0,150],&#34;stops&#34;:[[0,&#34;#CAE1F4&#34;],[1,&#34;#EEEEEE&#34;]]},&#34;style&#34;:{&#34;fontFamily&#34;:&#34;Open Sans&#34;}},&#34;title&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;subtitle&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;legend&#34;:{&#34;align&#34;:&#34;right&#34;,&#34;verticalAlign&#34;:&#34;bottom&#34;},&#34;xAxis&#34;:{&#34;gridLineWidth&#34;:1,&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1},&#34;yAxis&#34;:{&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1}},&#34;conf_opts&#34;:{&#34;global&#34;:{&#34;Date&#34;:null,&#34;VMLRadialGradientURL&#34;:&#34;http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png&#34;,&#34;canvasToolsURL&#34;:&#34;http =//code.highcharts.com/list(version)/modules/canvas-tools.js&#34;,&#34;getTimezoneOffset&#34;:null,&#34;timezoneOffset&#34;:0,&#34;useUTC&#34;:true},&#34;lang&#34;:{&#34;contextButtonTitle&#34;:&#34;Chart context menu&#34;,&#34;decimalPoint&#34;:&#34;.&#34;,&#34;downloadJPEG&#34;:&#34;Download JPEG image&#34;,&#34;downloadPDF&#34;:&#34;Download PDF document&#34;,&#34;downloadPNG&#34;:&#34;Download PNG image&#34;,&#34;downloadSVG&#34;:&#34;Download SVG vector image&#34;,&#34;drillUpText&#34;:&#34;Back to {series.name}&#34;,&#34;invalidDate&#34;:null,&#34;loading&#34;:&#34;Loading...&#34;,&#34;months&#34;:[&#34;January&#34;,&#34;February&#34;,&#34;March&#34;,&#34;April&#34;,&#34;May&#34;,&#34;June&#34;,&#34;July&#34;,&#34;August&#34;,&#34;September&#34;,&#34;October&#34;,&#34;November&#34;,&#34;December&#34;],&#34;noData&#34;:&#34;No data to display&#34;,&#34;numericSymbols&#34;:[&#34;k&#34;,&#34;M&#34;,&#34;G&#34;,&#34;T&#34;,&#34;P&#34;,&#34;E&#34;],&#34;printChart&#34;:&#34;Print chart&#34;,&#34;resetZoom&#34;:&#34;Reset zoom&#34;,&#34;resetZoomTitle&#34;:&#34;Reset zoom level 1:1&#34;,&#34;shortMonths&#34;:[&#34;Jan&#34;,&#34;Feb&#34;,&#34;Mar&#34;,&#34;Apr&#34;,&#34;May&#34;,&#34;Jun&#34;,&#34;Jul&#34;,&#34;Aug&#34;,&#34;Sep&#34;,&#34;Oct&#34;,&#34;Nov&#34;,&#34;Dec&#34;],&#34;thousandsSep&#34;:&#34; &#34;,&#34;weekdays&#34;:[&#34;Sunday&#34;,&#34;Monday&#34;,&#34;Tuesday&#34;,&#34;Wednesday&#34;,&#34;Thursday&#34;,&#34;Friday&#34;,&#34;Saturday&#34;]}},&#34;type&#34;:&#34;chart&#34;,&#34;fonts&#34;:&#34;Open+Sans&#34;,&#34;debug&#34;:false},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;In this example, &lt;code&gt;base::merge&lt;/code&gt; is twice as fast as &lt;code&gt;dplyr::left_join&lt;/code&gt;, and significantly outperforms &lt;code&gt;data.table:::merge.data.table&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;combining-by-columns&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Combining by columns&lt;/h2&gt;
&lt;p&gt;I will compare the following approaches:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;multiple calls to &lt;code&gt;base::cbind&lt;/code&gt; using a for-loop&lt;/li&gt;
&lt;li&gt;single call to &lt;code&gt;base::cbind&lt;/code&gt; using &lt;code&gt;do.call&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;single call to &lt;code&gt;dplyr::bind_cols&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;for_loop_cbind &amp;lt;- function(data_list){
  df = data_list[[1]]
  for (i in 2:length(data_list)){
    df = cbind(df, data_list[[i]])
  }
  return(df)
}

base_cbind_for_loop_cols = for_loop_cbind(data_list)
base_cbind_do_call_cols = do.call(cbind, data_list)
dplyr_bind_cols = bind_cols(data_list)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Are the dataframes identical?
# rename df columns
pattern = &amp;#39;_cols&amp;#39;
rename_dfs &amp;lt;- ls(pattern = pattern) %&amp;gt;%
  map(give_names)

# compare dataframes
ls(pattern = pattern) %&amp;gt;%
  map_lgl(compare_dfs) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE TRUE TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run benchmark&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;microbenchmark(
  base_cbind_do_call = do.call(cbind, data_list),
  dplyr_bind_cols = bind_cols(data_list),
  base_cbind_for_loop = for_loop_cbind(data_list),  
  times = num_of_iterations,
  unit = &amp;#39;ns&amp;#39;,
  control = list(warmup = 10)
  ) %&amp;gt;% 
  create_boxplot(title = &amp;quot;Combine by columns&amp;quot;)   &lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-3&#34; style=&#34;width:100%;height:500px;&#34; class=&#34;highchart html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-3&#34;&gt;{&#34;x&#34;:{&#34;hc_opts&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt;Combine by columns&lt;b&gt;&#34;},&#34;yAxis&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt; Time (ns)&lt;b&gt;&#34;}},&#34;credits&#34;:{&#34;enabled&#34;:false},&#34;exporting&#34;:{&#34;enabled&#34;:false},&#34;plotOptions&#34;:{&#34;series&#34;:{&#34;turboThreshold&#34;:0,&#34;marker&#34;:{&#34;symbol&#34;:&#34;circle&#34;},&#34;showInLegend&#34;:false},&#34;treemap&#34;:{&#34;layoutAlgorithm&#34;:&#34;squarified&#34;},&#34;bubble&#34;:{&#34;minSize&#34;:5,&#34;maxSize&#34;:25}},&#34;annotationsOptions&#34;:{&#34;enabledButtons&#34;:false},&#34;tooltip&#34;:{&#34;delayForDisplay&#34;:10},&#34;chart&#34;:{&#34;type&#34;:&#34;column&#34;},&#34;xAxis&#34;:{&#34;type&#34;:&#34;category&#34;,&#34;categories&#34;:&#34;&#34;},&#34;series&#34;:[{&#34;name&#34;:null,&#34;data&#34;:[{&#34;name&#34;:&#34;base_cbind_do_call&#34;,&#34;low&#34;:48708,&#34;q1&#34;:53239,&#34;median&#34;:55883,&#34;q3&#34;:63434.5,&#34;high&#34;:78538},{&#34;name&#34;:&#34;dplyr_bind_cols&#34;,&#34;low&#34;:90242,&#34;q1&#34;:103081,&#34;median&#34;:108366,&#34;q3&#34;:114408,&#34;high&#34;:131021},{&#34;name&#34;:&#34;base_cbind_for_loop&#34;,&#34;low&#34;:101570,&#34;q1&#34;:109877,&#34;median&#34;:115540,&#34;q3&#34;:126867.5,&#34;high&#34;:152166}],&#34;type&#34;:&#34;boxplot&#34;,&#34;id&#34;:null,&#34;color&#34;:&#34;tomato&#34;,&#34;fillColor&#34;:&#34;white&#34;,&#34;lineWidth&#34;:1.5}]},&#34;theme&#34;:{&#34;colors&#34;:[&#34;#00AACC&#34;,&#34;#FF4E00&#34;,&#34;#B90000&#34;,&#34;#5F9B0A&#34;,&#34;#CD6723&#34;],&#34;chart&#34;:{&#34;backgroundColor&#34;:{&#34;linearGradient&#34;:[0,0,0,150],&#34;stops&#34;:[[0,&#34;#CAE1F4&#34;],[1,&#34;#EEEEEE&#34;]]},&#34;style&#34;:{&#34;fontFamily&#34;:&#34;Open Sans&#34;}},&#34;title&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;subtitle&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;legend&#34;:{&#34;align&#34;:&#34;right&#34;,&#34;verticalAlign&#34;:&#34;bottom&#34;},&#34;xAxis&#34;:{&#34;gridLineWidth&#34;:1,&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1},&#34;yAxis&#34;:{&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1}},&#34;conf_opts&#34;:{&#34;global&#34;:{&#34;Date&#34;:null,&#34;VMLRadialGradientURL&#34;:&#34;http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png&#34;,&#34;canvasToolsURL&#34;:&#34;http =//code.highcharts.com/list(version)/modules/canvas-tools.js&#34;,&#34;getTimezoneOffset&#34;:null,&#34;timezoneOffset&#34;:0,&#34;useUTC&#34;:true},&#34;lang&#34;:{&#34;contextButtonTitle&#34;:&#34;Chart context menu&#34;,&#34;decimalPoint&#34;:&#34;.&#34;,&#34;downloadJPEG&#34;:&#34;Download JPEG image&#34;,&#34;downloadPDF&#34;:&#34;Download PDF document&#34;,&#34;downloadPNG&#34;:&#34;Download PNG image&#34;,&#34;downloadSVG&#34;:&#34;Download SVG vector image&#34;,&#34;drillUpText&#34;:&#34;Back to {series.name}&#34;,&#34;invalidDate&#34;:null,&#34;loading&#34;:&#34;Loading...&#34;,&#34;months&#34;:[&#34;January&#34;,&#34;February&#34;,&#34;March&#34;,&#34;April&#34;,&#34;May&#34;,&#34;June&#34;,&#34;July&#34;,&#34;August&#34;,&#34;September&#34;,&#34;October&#34;,&#34;November&#34;,&#34;December&#34;],&#34;noData&#34;:&#34;No data to display&#34;,&#34;numericSymbols&#34;:[&#34;k&#34;,&#34;M&#34;,&#34;G&#34;,&#34;T&#34;,&#34;P&#34;,&#34;E&#34;],&#34;printChart&#34;:&#34;Print chart&#34;,&#34;resetZoom&#34;:&#34;Reset zoom&#34;,&#34;resetZoomTitle&#34;:&#34;Reset zoom level 1:1&#34;,&#34;shortMonths&#34;:[&#34;Jan&#34;,&#34;Feb&#34;,&#34;Mar&#34;,&#34;Apr&#34;,&#34;May&#34;,&#34;Jun&#34;,&#34;Jul&#34;,&#34;Aug&#34;,&#34;Sep&#34;,&#34;Oct&#34;,&#34;Nov&#34;,&#34;Dec&#34;],&#34;thousandsSep&#34;:&#34; &#34;,&#34;weekdays&#34;:[&#34;Sunday&#34;,&#34;Monday&#34;,&#34;Tuesday&#34;,&#34;Wednesday&#34;,&#34;Thursday&#34;,&#34;Friday&#34;,&#34;Saturday&#34;]}},&#34;type&#34;:&#34;chart&#34;,&#34;fonts&#34;:&#34;Open+Sans&#34;,&#34;debug&#34;:false},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;In this example, &lt;code&gt;base::cbind&lt;/code&gt; with &lt;code&gt;do.call&lt;/code&gt; is the most efficient.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;aggregation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Aggregation&lt;/h2&gt;
&lt;p&gt;I will test this using the &lt;code&gt;mtcars&lt;/code&gt; dataset to compute the average weight (in 1000 lbs) of cars grouped by number of cylinders. As usual, I will compare functions in &lt;code&gt;dplyr&lt;/code&gt;, &lt;code&gt;base&lt;/code&gt; and &lt;code&gt;data.table&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;base_agg &amp;lt;- aggregate(mtcars$wt, by = list(mtcars$cyl), mean, na.rm = TRUE) %&amp;gt;% 
  as_tibble()
mtcars_dt = data.table(mtcars)
data_table_agg &amp;lt;- mtcars_dt[ , mean(wt, na.rm = TRUE), cyl] %&amp;gt;% 
  as_tibble()
dplyr_agg &amp;lt;- mtcars %&amp;gt;% 
  group_by(cyl) %&amp;gt;% 
  summarize(mean(wt, na.rm = TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# rename df columns
pattern = &amp;#39;_agg&amp;#39;
rename_dfs &amp;lt;- ls(pattern = pattern) %&amp;gt;%
  map(give_names)
# compare dataframes
ls(pattern = pattern) %&amp;gt;%
  map_lgl(compare_dfs) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE TRUE TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;microbenchmark(
  datatable = mtcars_dt[ , mean(wt, na.rm = TRUE), cyl],  
  base = aggregate(mtcars$wt, by = list(mtcars$cyl), mean, na.rm = TRUE),
  dplyr = mtcars %&amp;gt;% group_by(cyl) %&amp;gt;% summarize(mean(wt, na.rm = TRUE)),
  times = 1000,
  unit = &amp;quot;ns&amp;quot;,
  control = list(warmup = 10)
) %&amp;gt;% 
  create_boxplot(title = &amp;quot;Aggregation&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-4&#34; style=&#34;width:100%;height:500px;&#34; class=&#34;highchart html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-4&#34;&gt;{&#34;x&#34;:{&#34;hc_opts&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt;Aggregation&lt;b&gt;&#34;},&#34;yAxis&#34;:{&#34;title&#34;:{&#34;text&#34;:&#34;&lt;b&gt; Time (ns)&lt;b&gt;&#34;}},&#34;credits&#34;:{&#34;enabled&#34;:false},&#34;exporting&#34;:{&#34;enabled&#34;:false},&#34;plotOptions&#34;:{&#34;series&#34;:{&#34;turboThreshold&#34;:0,&#34;marker&#34;:{&#34;symbol&#34;:&#34;circle&#34;},&#34;showInLegend&#34;:false},&#34;treemap&#34;:{&#34;layoutAlgorithm&#34;:&#34;squarified&#34;},&#34;bubble&#34;:{&#34;minSize&#34;:5,&#34;maxSize&#34;:25}},&#34;annotationsOptions&#34;:{&#34;enabledButtons&#34;:false},&#34;tooltip&#34;:{&#34;delayForDisplay&#34;:10},&#34;chart&#34;:{&#34;type&#34;:&#34;column&#34;},&#34;xAxis&#34;:{&#34;type&#34;:&#34;category&#34;,&#34;categories&#34;:&#34;&#34;},&#34;series&#34;:[{&#34;name&#34;:null,&#34;data&#34;:[{&#34;name&#34;:&#34;datatable&#34;,&#34;low&#34;:350396,&#34;q1&#34;:395705,&#34;median&#34;:422890.5,&#34;q3&#34;:478395.5,&#34;high&#34;:601487},{&#34;name&#34;:&#34;base&#34;,&#34;low&#34;:579587,&#34;q1&#34;:643399,&#34;median&#34;:683421.5,&#34;q3&#34;:749310,&#34;high&#34;:906195},{&#34;name&#34;:&#34;dplyr&#34;,&#34;low&#34;:871835,&#34;q1&#34;:958490.5,&#34;median&#34;:1014183,&#34;q3&#34;:1114431,&#34;high&#34;:1344567}],&#34;type&#34;:&#34;boxplot&#34;,&#34;id&#34;:null,&#34;color&#34;:&#34;tomato&#34;,&#34;fillColor&#34;:&#34;white&#34;,&#34;lineWidth&#34;:1.5}]},&#34;theme&#34;:{&#34;colors&#34;:[&#34;#00AACC&#34;,&#34;#FF4E00&#34;,&#34;#B90000&#34;,&#34;#5F9B0A&#34;,&#34;#CD6723&#34;],&#34;chart&#34;:{&#34;backgroundColor&#34;:{&#34;linearGradient&#34;:[0,0,0,150],&#34;stops&#34;:[[0,&#34;#CAE1F4&#34;],[1,&#34;#EEEEEE&#34;]]},&#34;style&#34;:{&#34;fontFamily&#34;:&#34;Open Sans&#34;}},&#34;title&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;subtitle&#34;:{&#34;align&#34;:&#34;left&#34;},&#34;legend&#34;:{&#34;align&#34;:&#34;right&#34;,&#34;verticalAlign&#34;:&#34;bottom&#34;},&#34;xAxis&#34;:{&#34;gridLineWidth&#34;:1,&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1},&#34;yAxis&#34;:{&#34;gridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;lineColor&#34;:&#34;#F3F3F3&#34;,&#34;minorGridLineColor&#34;:&#34;#F3F3F3&#34;,&#34;tickColor&#34;:&#34;#F3F3F3&#34;,&#34;tickWidth&#34;:1}},&#34;conf_opts&#34;:{&#34;global&#34;:{&#34;Date&#34;:null,&#34;VMLRadialGradientURL&#34;:&#34;http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png&#34;,&#34;canvasToolsURL&#34;:&#34;http =//code.highcharts.com/list(version)/modules/canvas-tools.js&#34;,&#34;getTimezoneOffset&#34;:null,&#34;timezoneOffset&#34;:0,&#34;useUTC&#34;:true},&#34;lang&#34;:{&#34;contextButtonTitle&#34;:&#34;Chart context menu&#34;,&#34;decimalPoint&#34;:&#34;.&#34;,&#34;downloadJPEG&#34;:&#34;Download JPEG image&#34;,&#34;downloadPDF&#34;:&#34;Download PDF document&#34;,&#34;downloadPNG&#34;:&#34;Download PNG image&#34;,&#34;downloadSVG&#34;:&#34;Download SVG vector image&#34;,&#34;drillUpText&#34;:&#34;Back to {series.name}&#34;,&#34;invalidDate&#34;:null,&#34;loading&#34;:&#34;Loading...&#34;,&#34;months&#34;:[&#34;January&#34;,&#34;February&#34;,&#34;March&#34;,&#34;April&#34;,&#34;May&#34;,&#34;June&#34;,&#34;July&#34;,&#34;August&#34;,&#34;September&#34;,&#34;October&#34;,&#34;November&#34;,&#34;December&#34;],&#34;noData&#34;:&#34;No data to display&#34;,&#34;numericSymbols&#34;:[&#34;k&#34;,&#34;M&#34;,&#34;G&#34;,&#34;T&#34;,&#34;P&#34;,&#34;E&#34;],&#34;printChart&#34;:&#34;Print chart&#34;,&#34;resetZoom&#34;:&#34;Reset zoom&#34;,&#34;resetZoomTitle&#34;:&#34;Reset zoom level 1:1&#34;,&#34;shortMonths&#34;:[&#34;Jan&#34;,&#34;Feb&#34;,&#34;Mar&#34;,&#34;Apr&#34;,&#34;May&#34;,&#34;Jun&#34;,&#34;Jul&#34;,&#34;Aug&#34;,&#34;Sep&#34;,&#34;Oct&#34;,&#34;Nov&#34;,&#34;Dec&#34;],&#34;thousandsSep&#34;:&#34; &#34;,&#34;weekdays&#34;:[&#34;Sunday&#34;,&#34;Monday&#34;,&#34;Tuesday&#34;,&#34;Wednesday&#34;,&#34;Thursday&#34;,&#34;Friday&#34;,&#34;Saturday&#34;]}},&#34;type&#34;:&#34;chart&#34;,&#34;fonts&#34;:&#34;Open+Sans&#34;,&#34;debug&#34;:false},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; In this example, &lt;code&gt;data.table&lt;/code&gt; is the most efficient.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;wrapping-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Wrapping up&lt;/h2&gt;
&lt;p&gt;This study is far from a comprehensive benchmark. It is my attempt at quickly exploring the order of magnitude of execution times for common operations on dataframes; and more importantly, setting up a workflow which can be extended to cover other scenarios.&lt;/p&gt;
&lt;p&gt;Feel free to use the methods identified in these benchmarks to speed up your code but remember that &lt;strong&gt;writing good code trumps writing fast code&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“We follow two rules in the matters of optimization: Rule 1: Don’t do it. Rule 2 (for experts only): Don’t do it yet - that is, not until you have a perfectly clear and unoptimized solution” – M. A. Jackson&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For more information about code optimisation, read &lt;a href=&#34;http://adv-r.had.co.nz/Profiling.html&#34;&gt;Hadley Wickham’s take on the topic&lt;/a&gt;, item 67 from &lt;a href=&#34;https://books.google.co.uk/books?id=BIpDDwAAQBAJ&amp;amp;printsec=frontcover&amp;amp;source=gbs_ge_summary_r&amp;amp;cad=0#v=onepage&amp;amp;q&amp;amp;f=false&#34;&gt;Joshua Bloch’s Effective Java&lt;/a&gt; and the &lt;a href=&#34;https://arxiv.org/abs/1210.0530&#34;&gt;Best Practices for Scientific Computing&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The source code for this blog post is available on &lt;a href=&#34;https://github.com/eokodie/posts-rmd/blob/master/Rmd/2018-04-30-dataframe-benchmarks.Rmd&#34;&gt;GitHub.&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Installing Missing Packages from Bioconductor, CRAN and Github</title>
      <link>/blog/installing-missing-packages-from-bioconductor-cran-and-github/</link>
      <pubDate>Fri, 13 Apr 2018 21:13:14 -0500</pubDate>
      
      <guid>/blog/installing-missing-packages-from-bioconductor-cran-and-github/</guid>
      <description>


&lt;iframe src=&#34;https://giphy.com/embed/DZCtWie9jivao&#34; width=&#34;480&#34; height=&#34;270&#34; frameBorder=&#34;0&#34; class=&#34;giphy-embed&#34; allowFullScreen&gt;
&lt;/iframe&gt;
&lt;p&gt;
&lt;a href=&#34;https://giphy.com/gifs/disk-floppy-DZCtWie9jivao&#34;&gt;via GIPHY&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;Over the past few days I have had to use computers that are different from my trusty old laptop. One thing I noticed while working with R on the new machines is that the excitement in checking for, and installing, missing packages wears off pretty quickly. This blog post is a walk-through of a function I wrote to make the process less painful.&lt;/p&gt;
&lt;div id=&#34;a-bit-more-background&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;A bit more background&lt;/h2&gt;
&lt;p&gt;When R developers create open source packages, they typically distribute them through &lt;a href=&#34;https://cran.r-project.org/&#34;&gt;The Comprehensive R Archive Network (CRAN)&lt;/a&gt;, &lt;a href=&#34;https://github.com/&#34;&gt;Github&lt;/a&gt; or, if the package concerns computational biology and/or bioinformatics, &lt;a href=&#34;https://bioconductor.org/&#34;&gt;Bioconductor.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This adds to the complication of knowing which source to install a package from, which installation functions to use and, in the case of GitHub packages, the exact repository path to use.&lt;/p&gt;
&lt;div id=&#34;here-are-a-few-examples-for-context.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Here are a few examples for context.&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;taskscheduleR&lt;/code&gt; package is distributed on &lt;a href=&#34;https://github.com/&#34;&gt;Github.&lt;/a&gt; We can install it with:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;devtools::install_github(&amp;quot;bnosac/taskscheduleR&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;GenomicFeatures&lt;/code&gt; package is distributed on &lt;a href=&#34;https://www.bioconductor.org/install/&#34;&gt;Bioconductor&lt;/a&gt; so to install it we do this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;source(&amp;quot;https://bioconductor.org/biocLite.R&amp;quot;)
biocLite(&amp;quot;GenomicFeatures&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Lastly, &lt;code&gt;Rcpp&lt;/code&gt; is distributed on &lt;a href=&#34;https://cran.r-project.org/&#34;&gt;CRAN&lt;/a&gt; so we install it with:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;Rcpp&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;the-solution&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The solution&lt;/h2&gt;
&lt;p&gt;We will use the &lt;code&gt;remedy&lt;/code&gt; package as an example to test our code. To install &lt;code&gt;remedy&lt;/code&gt;, we first need to figure out which repository it is distributed on:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(glue)
package = &amp;quot;remedy&amp;quot; &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Is it available on CRAN?&lt;/p&gt;
&lt;p&gt;We can use &lt;code&gt;tools::CRAN_package_db()&lt;/code&gt; to extract metadata for the current packages in the CRAN package repository:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;package %in% tools::CRAN_package_db()$Package&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, &lt;code&gt;remedy&lt;/code&gt; is not on CRAN.&lt;/p&gt;
&lt;p&gt;Is it on Biconductor?&lt;/p&gt;
&lt;p&gt;&lt;code&gt;BiocInstaller::all_group()&lt;/code&gt; gives the names of all current packages on Bioconductor:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;package %in% BiocInstaller::all_group()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;remedy&lt;/code&gt; is not available on Bioconductor either.&lt;/p&gt;
&lt;p&gt;Lastly, we check whether the package is on GitHub. For this, we will use the &lt;a href=&#34;http://rpkg-api.gepuro.net/&#34;&gt;rpkg API&lt;/a&gt; and the &lt;code&gt;jsonlite&lt;/code&gt; package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;url &amp;lt;- glue::glue(&amp;quot;http://rpkg-api.gepuro.net/rpkg?q={package}&amp;quot;)
gh_pkgs &amp;lt;- jsonlite::fromJSON(url)
gh_pkgs&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##             pkg_name                                       title
## 1 ThinkR-open/remedy RStudio Addins to Simplify Markdown Writing
##                                     url
## 1 https://github.com/ThinkR-open/remedy&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that &lt;code&gt;fromJSON&lt;/code&gt; extracts GitHub R package information from the &lt;code&gt;rpkg API&lt;/code&gt; into a dataframe. If the said package is not available on Github, the funciton returns an empty list.&lt;/p&gt;
&lt;p&gt;In our example, we can see that the package we’re after is available on GitHub. We will go ahead and install it in a while, but in the meantime let’s tidy up the GitHub package metadata we just extracted:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gh_pkg &amp;lt;- gh_pkgs %&amp;gt;% 
  separate(col = pkg_name, into = c(&amp;quot;repo&amp;quot;, &amp;quot;pkg&amp;quot;), sep = &amp;quot;/&amp;quot;, remove = F) %&amp;gt;% 
  filter(pkg == package) %&amp;gt;% 
  select(pkg_name, repo, pkg)
gh_pkg&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##             pkg_name        repo    pkg
## 1 ThinkR-open/remedy ThinkR-open remedy&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The package is in the ThinkR-open repository on GitHub so we can install it with:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install_github(gh_pkg$pkg_name[1])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can follow a similar process to install packages on CRAN and Bioconductor.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;putting-it-all-together&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Putting it all together&lt;/h2&gt;
&lt;p&gt;Let’s finish off by wrapping everything in a function and throwing in a few useful checks for robustness:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install_missing_pkg &amp;lt;- function(package){
  url &amp;lt;- glue::glue(&amp;quot;http://rpkg-api.gepuro.net/rpkg?q={package}&amp;quot;)
  cran_pkgs &amp;lt;- tools::CRAN_package_db()$Package
  gh_pkgs &amp;lt;- jsonlite::fromJSON(url)
  source(&amp;quot;http://bioconductor.org/biocLite.R&amp;quot;)
  bioc_pkgs = all_group()
  
  if (is.null(nrow(gh_pkgs)) | !(package %in% union(cran_pkgs, bioc_pkgs))) {
    stop(&amp;quot;`package` is not available on CRAN, Github or Bioconductor&amp;quot;)
  }
  # install from CRAN  
  if (package %in% cran_pkgs){
    install.packages(package)
  # install from Bioconductor    
  } else if (package %in% bioc_pkgs){
    biocLite(package, suppressUpdates = TRUE)
  }
  # install from Github
  else{
    gh_pkg &amp;lt;- gh_pkgs %&amp;gt;% 
      separate(col = pkg_name, into = c(&amp;quot;repo&amp;quot;, &amp;quot;pkg&amp;quot;), sep = &amp;quot;/&amp;quot;, remove = F) %&amp;gt;% 
      mutate(available = package %in% cran_pkgs) %&amp;gt;% 
      filter(pkg == package)
    devtools::install_github(gh_pkg$pkg_name[1])
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The source code for this blog post is available on &lt;a href=&#34;https://github.com/eokodie/posts-rmd/blob/master/Rmd/2018-04-14-installing-missing-packages.Rmd&#34;&gt;GitHub.&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>